var Uo=Object.defineProperty;var zo=(t,e,r)=>e in t?Uo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ve=(t,e,r)=>(zo(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xr=window,qn=Xr.ShadowRoot&&(Xr.ShadyCSS===void 0||Xr.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Kn=Symbol(),xs=new WeakMap;let Ai=class{constructor(e,r,s){if(this._$cssResult$=!0,s!==Kn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(qn&&e===void 0){const s=r!==void 0&&r.length===1;s&&(e=xs.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&xs.set(r,e))}return e}toString(){return this.cssText}};const Ci=t=>new Ai(typeof t=="string"?t:t+"",void 0,Kn),tt=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((s,n,i)=>s+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1],t[0]);return new Ai(r,t,Kn)},Lo=(t,e)=>{qn?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const s=document.createElement("style"),n=Xr.litNonce;n!==void 0&&s.setAttribute("nonce",n),s.textContent=r.cssText,t.appendChild(s)})},Hs=qn?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const s of e.cssRules)r+=s.cssText;return Ci(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var yn;const tn=window,Bs=tn.trustedTypes,xo=Bs?Bs.emptyScript:"",qs=tn.reactiveElementPolyfillSupport,Rn={toAttribute(t,e){switch(e){case Boolean:t=t?xo:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Ii=(t,e)=>e!==t&&(e==e||t==t),$n={attribute:!0,type:String,converter:Rn,reflect:!1,hasChanged:Ii};let Xt=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,s)=>{const n=this._$Ep(s,r);n!==void 0&&(this._$Ev.set(n,s),e.push(n))}),e}static createProperty(e,r=$n){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const s=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,s,r);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,r,s){return{get(){return this[r]},set(n){const i=this[e];this[r]=n,this.requestUpdate(e,i,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||$n}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,s=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const n of s)this.createProperty(n,r[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const n of s)r.unshift(Hs(n))}else e!==void 0&&r.push(Hs(e));return r}static _$Ep(e,r){const s=r.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,s;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((s=e.hostConnected)===null||s===void 0||s.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Lo(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var s;return(s=r.hostConnected)===null||s===void 0?void 0:s.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var s;return(s=r.hostDisconnected)===null||s===void 0?void 0:s.call(r)})}attributeChangedCallback(e,r,s){this._$AK(e,s)}_$EO(e,r,s=$n){var n;const i=this.constructor._$Ep(e,s);if(i!==void 0&&s.reflect===!0){const o=(((n=s.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?s.converter:Rn).toAttribute(r,s.type);this._$El=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$El=null}}_$AK(e,r){var s;const n=this.constructor,i=n._$Ev.get(e);if(i!==void 0&&this._$El!==i){const o=n.getPropertyOptions(i),d=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)===null||s===void 0?void 0:s.fromAttribute)!==void 0?o.converter:Rn;this._$El=i,this[i]=d.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,s){let n=!0;e!==void 0&&(((s=s||this.constructor.getPropertyOptions(e)).hasChanged||Ii)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),s.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,s))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,i)=>this[i]=n),this._$Ei=void 0);let r=!1;const s=this._$AL;try{r=this.shouldUpdate(s),r?(this.willUpdate(s),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var i;return(i=n.hostUpdate)===null||i===void 0?void 0:i.call(n)}),this.update(s)):this._$Ek()}catch(n){throw r=!1,this._$Ek(),n}r&&this._$AE(s)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(s=>{var n;return(n=s.hostUpdated)===null||n===void 0?void 0:n.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,s)=>this._$EO(s,this[s],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Xt.finalized=!0,Xt.elementProperties=new Map,Xt.elementStyles=[],Xt.shadowRootOptions={mode:"open"},qs==null||qs({ReactiveElement:Xt}),((yn=tn.reactiveElementVersions)!==null&&yn!==void 0?yn:tn.reactiveElementVersions=[]).push("1.5.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var bn;const rn=window,rr=rn.trustedTypes,Ks=rr?rr.createPolicy("lit-html",{createHTML:t=>t}):void 0,$t=`lit$${(Math.random()+"").slice(9)}$`,Di="?"+$t,Ho=`<${Di}>`,nr=document,Nr=(t="")=>nr.createComment(t),Or=t=>t===null||typeof t!="object"&&typeof t!="function",Ri=Array.isArray,Bo=t=>Ri(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",pr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gs=/-->/g,Ws=/>/g,Rt=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Js=/'/g,Xs=/"/g,ki=/^(?:script|style|textarea|title)$/i,qo=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),_e=qo(1),Vt=Symbol.for("lit-noChange"),fe=Symbol.for("lit-nothing"),Ys=new WeakMap,Zt=nr.createTreeWalker(nr,129,null,!1),Ko=(t,e)=>{const r=t.length-1,s=[];let n,i=e===2?"<svg>":"",o=pr;for(let l=0;l<r;l++){const a=t[l];let h,f,w=-1,T=0;for(;T<a.length&&(o.lastIndex=T,f=o.exec(a),f!==null);)T=o.lastIndex,o===pr?f[1]==="!--"?o=Gs:f[1]!==void 0?o=Ws:f[2]!==void 0?(ki.test(f[2])&&(n=RegExp("</"+f[2],"g")),o=Rt):f[3]!==void 0&&(o=Rt):o===Rt?f[0]===">"?(o=n??pr,w=-1):f[1]===void 0?w=-2:(w=o.lastIndex-f[2].length,h=f[1],o=f[3]===void 0?Rt:f[3]==='"'?Xs:Js):o===Xs||o===Js?o=Rt:o===Gs||o===Ws?o=pr:(o=Rt,n=void 0);const y=o===Rt&&t[l+1].startsWith("/>")?" ":"";i+=o===pr?a+Ho:w>=0?(s.push(h),a.slice(0,w)+"$lit$"+a.slice(w)+$t+y):a+$t+(w===-2?(s.push(void 0),l):y)}const d=i+(t[r]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Ks!==void 0?Ks.createHTML(d):d,s]};class Ar{constructor({strings:e,_$litType$:r},s){let n;this.parts=[];let i=0,o=0;const d=e.length-1,l=this.parts,[a,h]=Ko(e,r);if(this.el=Ar.createElement(a,s),Zt.currentNode=this.el.content,r===2){const f=this.el.content,w=f.firstChild;w.remove(),f.append(...w.childNodes)}for(;(n=Zt.nextNode())!==null&&l.length<d;){if(n.nodeType===1){if(n.hasAttributes()){const f=[];for(const w of n.getAttributeNames())if(w.endsWith("$lit$")||w.startsWith($t)){const T=h[o++];if(f.push(w),T!==void 0){const y=n.getAttribute(T.toLowerCase()+"$lit$").split($t),$=/([.?@])?(.*)/.exec(T);l.push({type:1,index:i,name:$[2],strings:y,ctor:$[1]==="."?Wo:$[1]==="?"?Xo:$[1]==="@"?Yo:un})}else l.push({type:6,index:i})}for(const w of f)n.removeAttribute(w)}if(ki.test(n.tagName)){const f=n.textContent.split($t),w=f.length-1;if(w>0){n.textContent=rr?rr.emptyScript:"";for(let T=0;T<w;T++)n.append(f[T],Nr()),Zt.nextNode(),l.push({type:2,index:++i});n.append(f[w],Nr())}}}else if(n.nodeType===8)if(n.data===Di)l.push({type:2,index:i});else{let f=-1;for(;(f=n.data.indexOf($t,f+1))!==-1;)l.push({type:7,index:i}),f+=$t.length-1}i++}}static createElement(e,r){const s=nr.createElement("template");return s.innerHTML=e,s}}function sr(t,e,r=t,s){var n,i,o,d;if(e===Vt)return e;let l=s!==void 0?(n=r._$Co)===null||n===void 0?void 0:n[s]:r._$Cl;const a=Or(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==a&&((i=l==null?void 0:l._$AO)===null||i===void 0||i.call(l,!1),a===void 0?l=void 0:(l=new a(t),l._$AT(t,r,s)),s!==void 0?((o=(d=r)._$Co)!==null&&o!==void 0?o:d._$Co=[])[s]=l:r._$Cl=l),l!==void 0&&(e=sr(t,l._$AS(t,e.values),l,s)),e}class Go{constructor(e,r){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var r;const{el:{content:s},parts:n}=this._$AD,i=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:nr).importNode(s,!0);Zt.currentNode=i;let o=Zt.nextNode(),d=0,l=0,a=n[0];for(;a!==void 0;){if(d===a.index){let h;a.type===2?h=new Dr(o,o.nextSibling,this,e):a.type===1?h=new a.ctor(o,a.name,a.strings,this,e):a.type===6&&(h=new Qo(o,this,e)),this.u.push(h),a=n[++l]}d!==(a==null?void 0:a.index)&&(o=Zt.nextNode(),d++)}return i}p(e){let r=0;for(const s of this.u)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,r),r+=s.strings.length-2):s._$AI(e[r])),r++}}class Dr{constructor(e,r,s,n){var i;this.type=2,this._$AH=fe,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=s,this.options=n,this._$Cm=(i=n==null?void 0:n.isConnected)===null||i===void 0||i}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=sr(this,e,r),Or(e)?e===fe||e==null||e===""?(this._$AH!==fe&&this._$AR(),this._$AH=fe):e!==this._$AH&&e!==Vt&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Bo(e)?this.k(e):this.g(e)}O(e,r=this._$AB){return this._$AA.parentNode.insertBefore(e,r)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==fe&&Or(this._$AH)?this._$AA.nextSibling.data=e:this.T(nr.createTextNode(e)),this._$AH=e}$(e){var r;const{values:s,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Ar.createElement(n.h,this.options)),n);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===i)this._$AH.p(s);else{const o=new Go(i,this),d=o.v(this.options);o.p(s),this.T(d),this._$AH=o}}_$AC(e){let r=Ys.get(e.strings);return r===void 0&&Ys.set(e.strings,r=new Ar(e)),r}k(e){Ri(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let s,n=0;for(const i of e)n===r.length?r.push(s=new Dr(this.O(Nr()),this.O(Nr()),this,this.options)):s=r[n],s._$AI(i),n++;n<r.length&&(this._$AR(s&&s._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var s;for((s=this._$AP)===null||s===void 0||s.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cm=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class un{constructor(e,r,s,n,i){this.type=1,this._$AH=fe,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=i,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=fe}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,s,n){const i=this.strings;let o=!1;if(i===void 0)e=sr(this,e,r,0),o=!Or(e)||e!==this._$AH&&e!==Vt,o&&(this._$AH=e);else{const d=e;let l,a;for(e=i[0],l=0;l<i.length-1;l++)a=sr(this,d[s+l],r,l),a===Vt&&(a=this._$AH[l]),o||(o=!Or(a)||a!==this._$AH[l]),a===fe?e=fe:e!==fe&&(e+=(a??"")+i[l+1]),this._$AH[l]=a}o&&!n&&this.j(e)}j(e){e===fe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Wo extends un{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===fe?void 0:e}}const Jo=rr?rr.emptyScript:"";class Xo extends un{constructor(){super(...arguments),this.type=4}j(e){e&&e!==fe?this.element.setAttribute(this.name,Jo):this.element.removeAttribute(this.name)}}class Yo extends un{constructor(e,r,s,n,i){super(e,r,s,n,i),this.type=5}_$AI(e,r=this){var s;if((e=(s=sr(this,e,r,0))!==null&&s!==void 0?s:fe)===Vt)return;const n=this._$AH,i=e===fe&&n!==fe||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==fe&&(n===fe||i);i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,s;typeof this._$AH=="function"?this._$AH.call((s=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&s!==void 0?s:this.element,e):this._$AH.handleEvent(e)}}class Qo{constructor(e,r,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){sr(this,e)}}const Qs=rn.litHtmlPolyfillSupport;Qs==null||Qs(Ar,Dr),((bn=rn.litHtmlVersions)!==null&&bn!==void 0?bn:rn.litHtmlVersions=[]).push("2.5.0");const Zo=(t,e,r)=>{var s,n;const i=(s=r==null?void 0:r.renderBefore)!==null&&s!==void 0?s:e;let o=i._$litPart$;if(o===void 0){const d=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:null;i._$litPart$=o=new Dr(e.insertBefore(Nr(),d),d,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var wn,En;let De=class extends Xt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,r;const s=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=s.firstChild),s}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=Zo(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Vt}};De.finalized=!0,De._$litElement$=!0,(wn=globalThis.litElementHydrateSupport)===null||wn===void 0||wn.call(globalThis,{LitElement:De});const Zs=globalThis.litElementPolyfillSupport;Zs==null||Zs({LitElement:De});((En=globalThis.litElementVersions)!==null&&En!==void 0?En:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ft=t=>e=>typeof e=="function"?((r,s)=>(customElements.define(r,s),s))(t,e):((r,s)=>{const{kind:n,elements:i}=s;return{kind:n,elements:i,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ea=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function Se(t){return(e,r)=>r!==void 0?((s,n,i)=>{n.constructor.createProperty(i,s)})(t,e,r):ea(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function rt(t){return Se({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Sn;((Sn=window.HTMLSlotElement)===null||Sn===void 0?void 0:Sn.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mi={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ji=t=>(...e)=>({_$litDirective$:t,values:e});class Fi{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,s){this._$Ct=e,this._$AM=r,this._$Ci=s}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Et=ji(class extends Fi{constructor(t){var e;if(super(t),t.type!==Mi.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,s;if(this.nt===void 0){this.nt=new Set,t.strings!==void 0&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter(i=>i!=="")));for(const i in e)e[i]&&!(!((r=this.st)===null||r===void 0)&&r.has(i))&&this.nt.add(i);return this.render(e)}const n=t.element.classList;this.nt.forEach(i=>{i in e||(n.remove(i),this.nt.delete(i))});for(const i in e){const o=!!e[i];o===this.nt.has(i)||!((s=this.st)===null||s===void 0)&&s.has(i)||(o?(n.add(i),this.nt.add(i)):(n.remove(i),this.nt.delete(i)))}return Vt}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ta=t=>t??fe;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ra=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yr=(t,e)=>{var r,s;const n=t._$AN;if(n===void 0)return!1;for(const i of n)(s=(r=i)._$AO)===null||s===void 0||s.call(r,e,!1),yr(i,e);return!0},nn=t=>{let e,r;do{if((e=t._$AM)===void 0)break;r=e._$AN,r.delete(t),t=e}while((r==null?void 0:r.size)===0)},Vi=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(r===void 0)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),ia(e)}};function na(t){this._$AN!==void 0?(nn(this),this._$AM=t,Vi(this)):this._$AM=t}function sa(t,e=!1,r=0){const s=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(s))for(let i=r;i<s.length;i++)yr(s[i],!1),nn(s[i]);else s!=null&&(yr(s,!1),nn(s));else yr(this,t)}const ia=t=>{var e,r,s,n;t.type==Mi.CHILD&&((e=(s=t)._$AP)!==null&&e!==void 0||(s._$AP=sa),(r=(n=t)._$AQ)!==null&&r!==void 0||(n._$AQ=na))};class oa extends Fi{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,r,s){super._$AT(e,r,s),Vi(this),this.isConnected=e._$AU}_$AO(e,r=!0){var s,n;e!==this.isConnected&&(this.isConnected=e,e?(s=this.reconnected)===null||s===void 0||s.call(this):(n=this.disconnected)===null||n===void 0||n.call(this)),r&&(yr(this,e),nn(this))}setValue(e){if(ra(this._$Ct))this._$Ct._$AI(e,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=e,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const St=()=>new aa;class aa{}const Pn=new WeakMap,Pt=ji(class extends oa{render(t){return fe}update(t,[e]){var r;const s=e!==this.Y;return s&&this.Y!==void 0&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.dt=(r=t.options)===null||r===void 0?void 0:r.host,this.rt(this.ct=t.element)),fe}rt(t){var e;if(typeof this.Y=="function"){const r=(e=this.dt)!==null&&e!==void 0?e:globalThis;let s=Pn.get(r);s===void 0&&(s=new WeakMap,Pn.set(r,s)),s.get(this.Y)!==void 0&&this.Y.call(this.dt,void 0),s.set(this.Y,t),t!==void 0&&this.Y.call(this.dt,t)}else this.Y.value=t}get lt(){var t,e,r;return typeof this.Y=="function"?(e=Pn.get((t=this.dt)!==null&&t!==void 0?t:globalThis))===null||e===void 0?void 0:e.get(this.Y):(r=this.Y)===null||r===void 0?void 0:r.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),Nt=tt`
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  :host {
    color: var(--color-text);
  }

  a {
    color: var(--color-text-link);
  }

  a:visited {
    color: var(--color-text-link-visited);
  }

  a:focus,
  button:focus,
  input:focus {
    outline: var(--color-outline) dashed thin;
  }

  input {
    background: var(--color-bg-input);
    color: var(--color-text);
  }

  .material-icons-round {
    color: var(--color-text);
  }
`,dn=_e`<link
  rel="stylesheet"
  crossorigin="anonymous"
  href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
/>`;var ca=Object.defineProperty,la=Object.getOwnPropertyDescriptor,Rr=(t,e,r,s)=>{for(var n=s>1?void 0:s?la(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&ca(e,r,n),n};let Ut=class extends De{constructor(){super(...arguments),this.disabled=!1,this.pulse=!1,this.round=!1,this._button=St()}render(){return _e`<button
      class=${Et({round:this.round})}
      aria-label=${ta(this.label)}
      ?disabled=${this.disabled}
      @click=${this._handleClick}
      ${Pt(this._button)}
    >
      <slot></slot>
    </button>`}_handleClick(){const t=this._button.value;this.pulse&&t!==void 0&&t.animate([{boxShadow:"none"},{boxShadow:"0 0 20px var(--color-primary)"},{boxShadow:"none"}],250)}};Ut.styles=[Nt,tt`
      :host {
        display: block;
      }

      button {
        width: 100%;
        height: 100%;

        margin: 0;
        padding: 0.25rem;

        background: none;
        border: none;
        color: inherit;

        transition: background 200ms;

        font-weight: bold;
      }

      button.round {
        border-radius: 50%;
      }

      button:not([disabled]):hover {
        background: var(--color-bg-hover);
      }
    `];Rr([Se({type:Boolean})],Ut.prototype,"disabled",2);Rr([Se({type:Boolean})],Ut.prototype,"pulse",2);Rr([Se({type:Boolean})],Ut.prototype,"round",2);Rr([Se({attribute:"aria-label"})],Ut.prototype,"label",2);Ut=Rr([ft("tt-button")],Ut);var ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function da(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kn={exports:{}},Ui={},qe={},ir={},kr={},X={},Cr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(S){if(super(),!t.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class s extends e{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((O,D)=>`${O}${D}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((O,D)=>(D instanceof r&&(O[D.str]=(O[D.str]||0)+1),O),{})}}t._Code=s,t.nil=new s("");function n(p,...S){const O=[p[0]];let D=0;for(;D<S.length;)d(O,S[D]),O.push(p[++D]);return new s(O)}t._=n;const i=new s("+");function o(p,...S){const O=[T(p[0])];let D=0;for(;D<S.length;)O.push(i),d(O,S[D]),O.push(i,T(p[++D]));return l(O),new s(O)}t.str=o;function d(p,S){S instanceof s?p.push(...S._items):S instanceof r?p.push(S):p.push(f(S))}t.addCodeArg=d;function l(p){let S=1;for(;S<p.length-1;){if(p[S]===i){const O=a(p[S-1],p[S+1]);if(O!==void 0){p.splice(S-1,3,O);continue}p[S++]="+"}S++}}function a(p,S){if(S==='""')return p;if(p==='""')return S;if(typeof p=="string")return S instanceof r||p[p.length-1]!=='"'?void 0:typeof S!="string"?`${p.slice(0,-1)}${S}"`:S[0]==='"'?p.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(p instanceof r))return`"${p}${S.slice(1)}`}function h(p,S){return S.emptyStr()?p:p.emptyStr()?S:o`${p}${S}`}t.strConcat=h;function f(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:T(Array.isArray(p)?p.join(","):p)}function w(p){return new s(T(p))}t.stringify=w;function T(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=T;function y(p){return typeof p=="string"&&t.IDENTIFIER.test(p)?new s(`.${p}`):n`[${p}]`}t.getProperty=y;function $(p){if(typeof p=="string"&&t.IDENTIFIER.test(p))return new s(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}t.getEsmExportName=$;function g(p){return new s(p.toString())}t.regexpCode=g})(Cr);var Mn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Cr;class r extends Error{constructor(a){super(`CodeGen: "code" for ${a} not defined`),this.value=a.value}}var s;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(s=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class n{constructor({prefixes:a,parent:h}={}){this._names={},this._prefixes=a,this._parent=h}toName(a){return a instanceof e.Name?a:this.name(a)}name(a){return new e.Name(this._newName(a))}_newName(a){const h=this._names[a]||this._nameGroup(a);return`${a}${h.index++}`}_nameGroup(a){var h,f;if(!((f=(h=this._parent)===null||h===void 0?void 0:h._prefixes)===null||f===void 0)&&f.has(a)||this._prefixes&&!this._prefixes.has(a))throw new Error(`CodeGen: prefix "${a}" is not allowed in this scope`);return this._names[a]={prefix:a,index:0}}}t.Scope=n;class i extends e.Name{constructor(a,h){super(h),this.prefix=a}setValue(a,{property:h,itemIndex:f}){this.value=a,this.scopePath=(0,e._)`.${new e.Name(h)}[${f}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class d extends n{constructor(a){super(a),this._values={},this._scope=a.scope,this.opts={...a,_n:a.lines?o:e.nil}}get(){return this._scope}name(a){return new i(a,this._newName(a))}value(a,h){var f;if(h.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const w=this.toName(a),{prefix:T}=w,y=(f=h.key)!==null&&f!==void 0?f:h.ref;let $=this._values[T];if($){const S=$.get(y);if(S)return S}else $=this._values[T]=new Map;$.set(y,w);const g=this._scope[T]||(this._scope[T]=[]),p=g.length;return g[p]=h.ref,w.setValue(h,{property:T,itemIndex:p}),w}getValue(a,h){const f=this._values[a];if(f)return f.get(h)}scopeRefs(a,h=this._values){return this._reduceValues(h,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${a}${f.scopePath}`})}scopeCode(a=this._values,h,f){return this._reduceValues(a,w=>{if(w.value===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return w.value.code},h,f)}_reduceValues(a,h,f={},w){let T=e.nil;for(const y in a){const $=a[y];if(!$)continue;const g=f[y]=f[y]||new Map;$.forEach(p=>{if(g.has(p))return;g.set(p,s.Started);let S=h(p);if(S){const O=this.opts.es5?t.varKinds.var:t.varKinds.const;T=(0,e._)`${T}${O} ${p} = ${S};${this.opts._n}`}else if(S=w==null?void 0:w(p))T=(0,e._)`${T}${S}${this.opts._n}`;else throw new r(p);g.set(p,s.Completed)})}return T}}t.ValueScope=d})(Mn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Cr,r=Mn;var s=Cr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return s.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}});var n=Mn;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(c,v){return this}}class o extends i{constructor(c,v,I){super(),this.varKind=c,this.name=v,this.rhs=I}render({es5:c,_n:v}){const I=c?r.varKinds.var:this.varKind,F=this.rhs===void 0?"":` = ${this.rhs}`;return`${I} ${this.name}${F};`+v}optimizeNames(c,v){if(c[this.name.str])return this.rhs&&(this.rhs=ne(this.rhs,c,v)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class d extends i{constructor(c,v,I){super(),this.lhs=c,this.rhs=v,this.sideEffects=I}render({_n:c}){return`${this.lhs} = ${this.rhs};`+c}optimizeNames(c,v){if(!(this.lhs instanceof e.Name&&!c[this.lhs.str]&&!this.sideEffects))return this.rhs=ne(this.rhs,c,v),this}get names(){const c=this.lhs instanceof e.Name?{}:{...this.lhs.names};return pe(c,this.rhs)}}class l extends d{constructor(c,v,I,F){super(c,I,F),this.op=v}render({_n:c}){return`${this.lhs} ${this.op}= ${this.rhs};`+c}}class a extends i{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`${this.label}:`+c}}class h extends i{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`break${this.label?` ${this.label}`:""};`+c}}class f extends i{constructor(c){super(),this.error=c}render({_n:c}){return`throw ${this.error};`+c}get names(){return this.error.names}}class w extends i{constructor(c){super(),this.code=c}render({_n:c}){return`${this.code};`+c}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(c,v){return this.code=ne(this.code,c,v),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class T extends i{constructor(c=[]){super(),this.nodes=c}render(c){return this.nodes.reduce((v,I)=>v+I.render(c),"")}optimizeNodes(){const{nodes:c}=this;let v=c.length;for(;v--;){const I=c[v].optimizeNodes();Array.isArray(I)?c.splice(v,1,...I):I?c[v]=I:c.splice(v,1)}return c.length>0?this:void 0}optimizeNames(c,v){const{nodes:I}=this;let F=I.length;for(;F--;){const V=I[F];V.optimizeNames(c,v)||(Pe(c,V.names),I.splice(F,1))}return I.length>0?this:void 0}get names(){return this.nodes.reduce((c,v)=>K(c,v.names),{})}}class y extends T{render(c){return"{"+c._n+super.render(c)+"}"+c._n}}class $ extends T{}class g extends y{}g.kind="else";class p extends y{constructor(c,v){super(v),this.condition=c}render(c){let v=`if(${this.condition})`+super.render(c);return this.else&&(v+="else "+this.else.render(c)),v}optimizeNodes(){super.optimizeNodes();const c=this.condition;if(c===!0)return this.nodes;let v=this.else;if(v){const I=v.optimizeNodes();v=this.else=Array.isArray(I)?new g(I):I}if(v)return c===!1?v instanceof p?v:v.nodes:this.nodes.length?this:new p(Te(c),v instanceof p?[v]:v.nodes);if(!(c===!1||!this.nodes.length))return this}optimizeNames(c,v){var I;if(this.else=(I=this.else)===null||I===void 0?void 0:I.optimizeNames(c,v),!!(super.optimizeNames(c,v)||this.else))return this.condition=ne(this.condition,c,v),this}get names(){const c=super.names;return pe(c,this.condition),this.else&&K(c,this.else.names),c}}p.kind="if";class S extends y{}S.kind="for";class O extends S{constructor(c){super(),this.iteration=c}render(c){return`for(${this.iteration})`+super.render(c)}optimizeNames(c,v){if(super.optimizeNames(c,v))return this.iteration=ne(this.iteration,c,v),this}get names(){return K(super.names,this.iteration.names)}}class D extends S{constructor(c,v,I,F){super(),this.varKind=c,this.name=v,this.from=I,this.to=F}render(c){const v=c.es5?r.varKinds.var:this.varKind,{name:I,from:F,to:V}=this;return`for(${v} ${I}=${F}; ${I}<${V}; ${I}++)`+super.render(c)}get names(){const c=pe(super.names,this.from);return pe(c,this.to)}}class M extends S{constructor(c,v,I,F){super(),this.loop=c,this.varKind=v,this.name=I,this.iterable=F}render(c){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(c)}optimizeNames(c,v){if(super.optimizeNames(c,v))return this.iterable=ne(this.iterable,c,v),this}get names(){return K(super.names,this.iterable.names)}}class E extends y{constructor(c,v,I){super(),this.name=c,this.args=v,this.async=I}render(c){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(c)}}E.kind="func";class C extends T{render(c){return"return "+super.render(c)}}C.kind="return";class k extends y{render(c){let v="try"+super.render(c);return this.catch&&(v+=this.catch.render(c)),this.finally&&(v+=this.finally.render(c)),v}optimizeNodes(){var c,v;return super.optimizeNodes(),(c=this.catch)===null||c===void 0||c.optimizeNodes(),(v=this.finally)===null||v===void 0||v.optimizeNodes(),this}optimizeNames(c,v){var I,F;return super.optimizeNames(c,v),(I=this.catch)===null||I===void 0||I.optimizeNames(c,v),(F=this.finally)===null||F===void 0||F.optimizeNames(c,v),this}get names(){const c=super.names;return this.catch&&K(c,this.catch.names),this.finally&&K(c,this.finally.names),c}}class x extends y{constructor(c){super(),this.error=c}render(c){return`catch(${this.error})`+super.render(c)}}x.kind="catch";class B extends y{render(c){return"finally"+super.render(c)}}B.kind="finally";class te{constructor(c,v={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...v,_n:v.lines?`
`:""},this._extScope=c,this._scope=new r.Scope({parent:c}),this._nodes=[new $]}toString(){return this._root.render(this.opts)}name(c){return this._scope.name(c)}scopeName(c){return this._extScope.name(c)}scopeValue(c,v){const I=this._extScope.value(c,v);return(this._values[I.prefix]||(this._values[I.prefix]=new Set)).add(I),I}getScopeValue(c,v){return this._extScope.getValue(c,v)}scopeRefs(c){return this._extScope.scopeRefs(c,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(c,v,I,F){const V=this._scope.toName(v);return I!==void 0&&F&&(this._constants[V.str]=I),this._leafNode(new o(c,V,I)),V}const(c,v,I){return this._def(r.varKinds.const,c,v,I)}let(c,v,I){return this._def(r.varKinds.let,c,v,I)}var(c,v,I){return this._def(r.varKinds.var,c,v,I)}assign(c,v,I){return this._leafNode(new d(c,v,I))}add(c,v){return this._leafNode(new l(c,t.operators.ADD,v))}code(c){return typeof c=="function"?c():c!==e.nil&&this._leafNode(new w(c)),this}object(...c){const v=["{"];for(const[I,F]of c)v.length>1&&v.push(","),v.push(I),(I!==F||this.opts.es5)&&(v.push(":"),(0,e.addCodeArg)(v,F));return v.push("}"),new e._Code(v)}if(c,v,I){if(this._blockNode(new p(c)),v&&I)this.code(v).else().code(I).endIf();else if(v)this.code(v).endIf();else if(I)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(c){return this._elseNode(new p(c))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(p,g)}_for(c,v){return this._blockNode(c),v&&this.code(v).endFor(),this}for(c,v){return this._for(new O(c),v)}forRange(c,v,I,F,V=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(c);return this._for(new D(V,G,v,I),()=>F(G))}forOf(c,v,I,F=r.varKinds.const){const V=this._scope.toName(c);if(this.opts.es5){const G=v instanceof e.Name?v:this.var("_arr",v);return this.forRange("_i",0,(0,e._)`${G}.length`,W=>{this.var(V,(0,e._)`${G}[${W}]`),I(V)})}return this._for(new M("of",F,V,v),()=>I(V))}forIn(c,v,I,F=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(c,(0,e._)`Object.keys(${v})`,I);const V=this._scope.toName(c);return this._for(new M("in",F,V,v),()=>I(V))}endFor(){return this._endBlockNode(S)}label(c){return this._leafNode(new a(c))}break(c){return this._leafNode(new h(c))}return(c){const v=new C;if(this._blockNode(v),this.code(c),v.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(c,v,I){if(!v&&!I)throw new Error('CodeGen: "try" without "catch" and "finally"');const F=new k;if(this._blockNode(F),this.code(c),v){const V=this.name("e");this._currNode=F.catch=new x(V),v(V)}return I&&(this._currNode=F.finally=new B,this.code(I)),this._endBlockNode(x,B)}throw(c){return this._leafNode(new f(c))}block(c,v){return this._blockStarts.push(this._nodes.length),c&&this.code(c).endBlock(v),this}endBlock(c){const v=this._blockStarts.pop();if(v===void 0)throw new Error("CodeGen: not in self-balancing block");const I=this._nodes.length-v;if(I<0||c!==void 0&&I!==c)throw new Error(`CodeGen: wrong number of nodes: ${I} vs ${c} expected`);return this._nodes.length=v,this}func(c,v=e.nil,I,F){return this._blockNode(new E(c,v,I)),F&&this.code(F).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(c=1){for(;c-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(c){return this._currNode.nodes.push(c),this}_blockNode(c){this._currNode.nodes.push(c),this._nodes.push(c)}_endBlockNode(c,v){const I=this._currNode;if(I instanceof c||v&&I instanceof v)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${v?`${c.kind}/${v.kind}`:c.kind}"`)}_elseNode(c){const v=this._currNode;if(!(v instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=v.else=c,this}get _root(){return this._nodes[0]}get _currNode(){const c=this._nodes;return c[c.length-1]}set _currNode(c){const v=this._nodes;v[v.length-1]=c}}t.CodeGen=te;function K(P,c){for(const v in c)P[v]=(P[v]||0)+(c[v]||0);return P}function pe(P,c){return c instanceof e._CodeOrName?K(P,c.names):P}function ne(P,c,v){if(P instanceof e.Name)return I(P);if(!F(P))return P;return new e._Code(P._items.reduce((V,G)=>(G instanceof e.Name&&(G=I(G)),G instanceof e._Code?V.push(...G._items):V.push(G),V),[]));function I(V){const G=v[V.str];return G===void 0||c[V.str]!==1?V:(delete c[V.str],G)}function F(V){return V instanceof e._Code&&V._items.some(G=>G instanceof e.Name&&c[G.str]===1&&v[G.str]!==void 0)}}function Pe(P,c){for(const v in c)P[v]=(P[v]||0)-(c[v]||0)}function Te(P){return typeof P=="boolean"||typeof P=="number"||P===null?!P:(0,e._)`!${R(P)}`}t.not=Te;const Re=b(t.operators.AND);function ze(...P){return P.reduce(Re)}t.and=ze;const ke=b(t.operators.OR);function j(...P){return P.reduce(ke)}t.or=j;function b(P){return(c,v)=>c===e.nil?v:v===e.nil?c:(0,e._)`${R(c)} ${P} ${R(v)}`}function R(P){return P instanceof e.Name?P:(0,e._)`(${P})`}})(X);var Z={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=X,r=Cr;function s(E){const C={};for(const k of E)C[k]=!0;return C}t.toHash=s;function n(E,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(E,C),!o(C,E.self.RULES.all))}t.alwaysValidSchema=n;function i(E,C=E.schema){const{opts:k,self:x}=E;if(!k.strictSchema||typeof C=="boolean")return;const B=x.RULES.keywords;for(const te in C)B[te]||M(E,`unknown keyword: "${te}"`)}t.checkUnknownRules=i;function o(E,C){if(typeof E=="boolean")return!E;for(const k in E)if(C[k])return!0;return!1}t.schemaHasRules=o;function d(E,C){if(typeof E=="boolean")return!E;for(const k in E)if(k!=="$ref"&&C.all[k])return!0;return!1}t.schemaHasRulesButRef=d;function l({topSchemaRef:E,schemaPath:C},k,x,B){if(!B){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,e._)`${k}`}return(0,e._)`${E}${C}${(0,e.getProperty)(x)}`}t.schemaRefOrVal=l;function a(E){return w(decodeURIComponent(E))}t.unescapeFragment=a;function h(E){return encodeURIComponent(f(E))}t.escapeFragment=h;function f(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=f;function w(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=w;function T(E,C){if(Array.isArray(E))for(const k of E)C(k);else C(E)}t.eachItem=T;function y({mergeNames:E,mergeToName:C,mergeValues:k,resultToName:x}){return(B,te,K,pe)=>{const ne=K===void 0?te:K instanceof e.Name?(te instanceof e.Name?E(B,te,K):C(B,te,K),K):te instanceof e.Name?(C(B,K,te),te):k(te,K);return pe===e.Name&&!(ne instanceof e.Name)?x(B,ne):ne}}t.mergeEvaluated={props:y({mergeNames:(E,C,k)=>E.if((0,e._)`${k} !== true && ${C} !== undefined`,()=>{E.if((0,e._)`${C} === true`,()=>E.assign(k,!0),()=>E.assign(k,(0,e._)`${k} || {}`).code((0,e._)`Object.assign(${k}, ${C})`))}),mergeToName:(E,C,k)=>E.if((0,e._)`${k} !== true`,()=>{C===!0?E.assign(k,!0):(E.assign(k,(0,e._)`${k} || {}`),g(E,k,C))}),mergeValues:(E,C)=>E===!0?!0:{...E,...C},resultToName:$}),items:y({mergeNames:(E,C,k)=>E.if((0,e._)`${k} !== true && ${C} !== undefined`,()=>E.assign(k,(0,e._)`${C} === true ? true : ${k} > ${C} ? ${k} : ${C}`)),mergeToName:(E,C,k)=>E.if((0,e._)`${k} !== true`,()=>E.assign(k,C===!0?!0:(0,e._)`${k} > ${C} ? ${k} : ${C}`)),mergeValues:(E,C)=>E===!0?!0:Math.max(E,C),resultToName:(E,C)=>E.var("items",C)})};function $(E,C){if(C===!0)return E.var("props",!0);const k=E.var("props",(0,e._)`{}`);return C!==void 0&&g(E,k,C),k}t.evaluatedPropsToName=$;function g(E,C,k){Object.keys(k).forEach(x=>E.assign((0,e._)`${C}${(0,e.getProperty)(x)}`,!0))}t.setEvaluated=g;const p={};function S(E,C){return E.scopeValue("func",{ref:C,code:p[C.code]||(p[C.code]=new r._Code(C.code))})}t.useFunc=S;var O;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(O=t.Type||(t.Type={}));function D(E,C,k){if(E instanceof e.Name){const x=C===O.Num;return k?x?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:x?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,e.getProperty)(E).toString():"/"+f(E)}t.getErrorPath=D;function M(E,C,k=E.opts.strictSchema){if(k){if(C=`strict mode: ${C}`,k===!0)throw new Error(C);E.self.logger.warn(C)}}t.checkStrictMode=M})(Z);var nt={};Object.defineProperty(nt,"__esModule",{value:!0});const Ee=X,ha={data:new Ee.Name("data"),valCxt:new Ee.Name("valCxt"),instancePath:new Ee.Name("instancePath"),parentData:new Ee.Name("parentData"),parentDataProperty:new Ee.Name("parentDataProperty"),rootData:new Ee.Name("rootData"),dynamicAnchors:new Ee.Name("dynamicAnchors"),vErrors:new Ee.Name("vErrors"),errors:new Ee.Name("errors"),this:new Ee.Name("this"),self:new Ee.Name("self"),scope:new Ee.Name("scope"),json:new Ee.Name("json"),jsonPos:new Ee.Name("jsonPos"),jsonLen:new Ee.Name("jsonLen"),jsonPart:new Ee.Name("jsonPart")};nt.default=ha;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=X,r=Z,s=nt;t.keywordError={message:({keyword:g})=>(0,e.str)`must pass "${g}" keyword validation`},t.keyword$DataError={message:({keyword:g,schemaType:p})=>p?(0,e.str)`"${g}" keyword must be ${p} ($data)`:(0,e.str)`"${g}" keyword is invalid ($data)`};function n(g,p=t.keywordError,S,O){const{it:D}=g,{gen:M,compositeRule:E,allErrors:C}=D,k=f(g,p,S);O??(E||C)?l(M,k):a(D,(0,e._)`[${k}]`)}t.reportError=n;function i(g,p=t.keywordError,S){const{it:O}=g,{gen:D,compositeRule:M,allErrors:E}=O,C=f(g,p,S);l(D,C),M||E||a(O,s.default.vErrors)}t.reportExtraError=i;function o(g,p){g.assign(s.default.errors,p),g.if((0,e._)`${s.default.vErrors} !== null`,()=>g.if(p,()=>g.assign((0,e._)`${s.default.vErrors}.length`,p),()=>g.assign(s.default.vErrors,null)))}t.resetErrorsCount=o;function d({gen:g,keyword:p,schemaValue:S,data:O,errsCount:D,it:M}){if(D===void 0)throw new Error("ajv implementation error");const E=g.name("err");g.forRange("i",D,s.default.errors,C=>{g.const(E,(0,e._)`${s.default.vErrors}[${C}]`),g.if((0,e._)`${E}.instancePath === undefined`,()=>g.assign((0,e._)`${E}.instancePath`,(0,e.strConcat)(s.default.instancePath,M.errorPath))),g.assign((0,e._)`${E}.schemaPath`,(0,e.str)`${M.errSchemaPath}/${p}`),M.opts.verbose&&(g.assign((0,e._)`${E}.schema`,S),g.assign((0,e._)`${E}.data`,O))})}t.extendErrors=d;function l(g,p){const S=g.const("err",p);g.if((0,e._)`${s.default.vErrors} === null`,()=>g.assign(s.default.vErrors,(0,e._)`[${S}]`),(0,e._)`${s.default.vErrors}.push(${S})`),g.code((0,e._)`${s.default.errors}++`)}function a(g,p){const{gen:S,validateName:O,schemaEnv:D}=g;D.$async?S.throw((0,e._)`new ${g.ValidationError}(${p})`):(S.assign((0,e._)`${O}.errors`,p),S.return(!1))}const h={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(g,p,S){const{createErrors:O}=g.it;return O===!1?(0,e._)`{}`:w(g,p,S)}function w(g,p,S={}){const{gen:O,it:D}=g,M=[T(D,S),y(g,S)];return $(g,p,M),O.object(...M)}function T({errorPath:g},{instancePath:p}){const S=p?(0,e.str)`${g}${(0,r.getErrorPath)(p,r.Type.Str)}`:g;return[s.default.instancePath,(0,e.strConcat)(s.default.instancePath,S)]}function y({keyword:g,it:{errSchemaPath:p}},{schemaPath:S,parentSchema:O}){let D=O?p:(0,e.str)`${p}/${g}`;return S&&(D=(0,e.str)`${D}${(0,r.getErrorPath)(S,r.Type.Str)}`),[h.schemaPath,D]}function $(g,{params:p,message:S},O){const{keyword:D,data:M,schemaValue:E,it:C}=g,{opts:k,propertyName:x,topSchemaRef:B,schemaPath:te}=C;O.push([h.keyword,D],[h.params,typeof p=="function"?p(g):p||(0,e._)`{}`]),k.messages&&O.push([h.message,typeof S=="function"?S(g):S]),k.verbose&&O.push([h.schema,E],[h.parentSchema,(0,e._)`${B}${te}`],[s.default.data,M]),x&&O.push([h.propertyName,x])}})(kr);Object.defineProperty(ir,"__esModule",{value:!0});ir.boolOrEmptySchema=ir.topBoolOrEmptySchema=void 0;const fa=kr,pa=X,ma=nt,va={message:"boolean schema is false"};function _a(t){const{gen:e,schema:r,validateName:s}=t;r===!1?zi(t,!1):typeof r=="object"&&r.$async===!0?e.return(ma.default.data):(e.assign((0,pa._)`${s}.errors`,null),e.return(!0))}ir.topBoolOrEmptySchema=_a;function ga(t,e){const{gen:r,schema:s}=t;s===!1?(r.var(e,!1),zi(t)):r.var(e,!0)}ir.boolOrEmptySchema=ga;function zi(t,e){const{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,fa.reportError)(n,va,void 0,e)}var Mr={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.getRules=zt.isJSONType=void 0;const ya=["string","number","integer","boolean","null","object","array"],$a=new Set(ya);function ba(t){return typeof t=="string"&&$a.has(t)}zt.isJSONType=ba;function wa(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}zt.getRules=wa;var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.shouldUseRule=dt.shouldUseGroup=dt.schemaHasRulesForType=void 0;function Ea({schema:t,self:e},r){const s=e.RULES.types[r];return s&&s!==!0&&Li(t,s)}dt.schemaHasRulesForType=Ea;function Li(t,e){return e.rules.some(r=>xi(t,r))}dt.shouldUseGroup=Li;function xi(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}dt.shouldUseRule=xi;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=zt,r=dt,s=kr,n=X,i=Z;var o;(function(O){O[O.Correct=0]="Correct",O[O.Wrong=1]="Wrong"})(o=t.DataType||(t.DataType={}));function d(O){const D=l(O.type);if(D.includes("null")){if(O.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!D.length&&O.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');O.nullable===!0&&D.push("null")}return D}t.getSchemaTypes=d;function l(O){const D=Array.isArray(O)?O:O?[O]:[];if(D.every(e.isJSONType))return D;throw new Error("type must be JSONType or JSONType[]: "+D.join(","))}t.getJSONTypes=l;function a(O,D){const{gen:M,data:E,opts:C}=O,k=f(D,C.coerceTypes),x=D.length>0&&!(k.length===0&&D.length===1&&(0,r.schemaHasRulesForType)(O,D[0]));if(x){const B=$(D,E,C.strictNumbers,o.Wrong);M.if(B,()=>{k.length?w(O,D,k):p(O)})}return x}t.coerceAndCheckDataType=a;const h=new Set(["string","number","integer","boolean","null"]);function f(O,D){return D?O.filter(M=>h.has(M)||D==="array"&&M==="array"):[]}function w(O,D,M){const{gen:E,data:C,opts:k}=O,x=E.let("dataType",(0,n._)`typeof ${C}`),B=E.let("coerced",(0,n._)`undefined`);k.coerceTypes==="array"&&E.if((0,n._)`${x} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>E.assign(C,(0,n._)`${C}[0]`).assign(x,(0,n._)`typeof ${C}`).if($(D,C,k.strictNumbers),()=>E.assign(B,C))),E.if((0,n._)`${B} !== undefined`);for(const K of M)(h.has(K)||K==="array"&&k.coerceTypes==="array")&&te(K);E.else(),p(O),E.endIf(),E.if((0,n._)`${B} !== undefined`,()=>{E.assign(C,B),T(O,B)});function te(K){switch(K){case"string":E.elseIf((0,n._)`${x} == "number" || ${x} == "boolean"`).assign(B,(0,n._)`"" + ${C}`).elseIf((0,n._)`${C} === null`).assign(B,(0,n._)`""`);return;case"number":E.elseIf((0,n._)`${x} == "boolean" || ${C} === null
              || (${x} == "string" && ${C} && ${C} == +${C})`).assign(B,(0,n._)`+${C}`);return;case"integer":E.elseIf((0,n._)`${x} === "boolean" || ${C} === null
              || (${x} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(B,(0,n._)`+${C}`);return;case"boolean":E.elseIf((0,n._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(B,!1).elseIf((0,n._)`${C} === "true" || ${C} === 1`).assign(B,!0);return;case"null":E.elseIf((0,n._)`${C} === "" || ${C} === 0 || ${C} === false`),E.assign(B,null);return;case"array":E.elseIf((0,n._)`${x} === "string" || ${x} === "number"
              || ${x} === "boolean" || ${C} === null`).assign(B,(0,n._)`[${C}]`)}}}function T({gen:O,parentData:D,parentDataProperty:M},E){O.if((0,n._)`${D} !== undefined`,()=>O.assign((0,n._)`${D}[${M}]`,E))}function y(O,D,M,E=o.Correct){const C=E===o.Correct?n.operators.EQ:n.operators.NEQ;let k;switch(O){case"null":return(0,n._)`${D} ${C} null`;case"array":k=(0,n._)`Array.isArray(${D})`;break;case"object":k=(0,n._)`${D} && typeof ${D} == "object" && !Array.isArray(${D})`;break;case"integer":k=x((0,n._)`!(${D} % 1) && !isNaN(${D})`);break;case"number":k=x();break;default:return(0,n._)`typeof ${D} ${C} ${O}`}return E===o.Correct?k:(0,n.not)(k);function x(B=n.nil){return(0,n.and)((0,n._)`typeof ${D} == "number"`,B,M?(0,n._)`isFinite(${D})`:n.nil)}}t.checkDataType=y;function $(O,D,M,E){if(O.length===1)return y(O[0],D,M,E);let C;const k=(0,i.toHash)(O);if(k.array&&k.object){const x=(0,n._)`typeof ${D} != "object"`;C=k.null?x:(0,n._)`!${D} || ${x}`,delete k.null,delete k.array,delete k.object}else C=n.nil;k.number&&delete k.integer;for(const x in k)C=(0,n.and)(C,y(x,D,M,E));return C}t.checkDataTypes=$;const g={message:({schema:O})=>`must be ${O}`,params:({schema:O,schemaValue:D})=>typeof O=="string"?(0,n._)`{type: ${O}}`:(0,n._)`{type: ${D}}`};function p(O){const D=S(O);(0,s.reportError)(D,g)}t.reportTypeError=p;function S(O){const{gen:D,data:M,schema:E}=O,C=(0,i.schemaRefOrVal)(O,E,"type");return{gen:D,keyword:"type",data:M,schema:E.type,schemaCode:C,schemaValue:C,parentSchema:E,params:{},it:O}}})(Mr);var hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.assignDefaults=void 0;const Gt=X,Sa=Z;function Pa(t,e){const{properties:r,items:s}=t.schema;if(e==="object"&&r)for(const n in r)ei(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,i)=>ei(t,i,n.default))}hn.assignDefaults=Pa;function ei(t,e,r){const{gen:s,compositeRule:n,data:i,opts:o}=t;if(r===void 0)return;const d=(0,Gt._)`${i}${(0,Gt.getProperty)(e)}`;if(n){(0,Sa.checkStrictMode)(t,`default is ignored for: ${d}`);return}let l=(0,Gt._)`${d} === undefined`;o.useDefaults==="empty"&&(l=(0,Gt._)`${l} || ${d} === null || ${d} === ""`),s.if(l,(0,Gt._)`${d} = ${(0,Gt.stringify)(r)}`)}var et={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.validateUnion=J.validateArray=J.usePattern=J.callValidateCode=J.schemaProperties=J.allSchemaProperties=J.noPropertyInData=J.propertyInData=J.isOwnProperty=J.hasPropFunc=J.reportMissingProp=J.checkMissingProp=J.checkReportMissingProp=void 0;const ae=X,Gn=Z,_t=nt,Ta=Z;function Na(t,e){const{gen:r,data:s,it:n}=t;r.if(Jn(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ae._)`${e}`},!0),t.error()})}J.checkReportMissingProp=Na;function Oa({gen:t,data:e,it:{opts:r}},s,n){return(0,ae.or)(...s.map(i=>(0,ae.and)(Jn(t,e,i,r.ownProperties),(0,ae._)`${n} = ${i}`)))}J.checkMissingProp=Oa;function Aa(t,e){t.setParams({missingProperty:e},!0),t.error()}J.reportMissingProp=Aa;function Hi(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ae._)`Object.prototype.hasOwnProperty`})}J.hasPropFunc=Hi;function Wn(t,e,r){return(0,ae._)`${Hi(t)}.call(${e}, ${r})`}J.isOwnProperty=Wn;function Ca(t,e,r,s){const n=(0,ae._)`${e}${(0,ae.getProperty)(r)} !== undefined`;return s?(0,ae._)`${n} && ${Wn(t,e,r)}`:n}J.propertyInData=Ca;function Jn(t,e,r,s){const n=(0,ae._)`${e}${(0,ae.getProperty)(r)} === undefined`;return s?(0,ae.or)(n,(0,ae.not)(Wn(t,e,r))):n}J.noPropertyInData=Jn;function Bi(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}J.allSchemaProperties=Bi;function Ia(t,e){return Bi(e).filter(r=>!(0,Gn.alwaysValidSchema)(t,e[r]))}J.schemaProperties=Ia;function Da({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:i},it:o},d,l,a){const h=a?(0,ae._)`${t}, ${e}, ${s}${n}`:e,f=[[_t.default.instancePath,(0,ae.strConcat)(_t.default.instancePath,i)],[_t.default.parentData,o.parentData],[_t.default.parentDataProperty,o.parentDataProperty],[_t.default.rootData,_t.default.rootData]];o.opts.dynamicRef&&f.push([_t.default.dynamicAnchors,_t.default.dynamicAnchors]);const w=(0,ae._)`${h}, ${r.object(...f)}`;return l!==ae.nil?(0,ae._)`${d}.call(${l}, ${w})`:(0,ae._)`${d}(${w})`}J.callValidateCode=Da;const Ra=(0,ae._)`new RegExp`;function ka({gen:t,it:{opts:e}},r){const s=e.unicodeRegExp?"u":"",{regExp:n}=e.code,i=n(r,s);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ae._)`${n.code==="new RegExp"?Ra:(0,Ta.useFunc)(t,n)}(${r}, ${s})`})}J.usePattern=ka;function Ma(t){const{gen:e,data:r,keyword:s,it:n}=t,i=e.name("valid");if(n.allErrors){const d=e.let("valid",!0);return o(()=>e.assign(d,!1)),d}return e.var(i,!0),o(()=>e.break()),i;function o(d){const l=e.const("len",(0,ae._)`${r}.length`);e.forRange("i",0,l,a=>{t.subschema({keyword:s,dataProp:a,dataPropType:Gn.Type.Num},i),e.if((0,ae.not)(i),d)})}}J.validateArray=Ma;function ja(t){const{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,Gn.alwaysValidSchema)(n,l))&&!n.opts.unevaluated)return;const o=e.let("valid",!1),d=e.name("_valid");e.block(()=>r.forEach((l,a)=>{const h=t.subschema({keyword:s,schemaProp:a,compositeRule:!0},d);e.assign(o,(0,ae._)`${o} || ${d}`),t.mergeValidEvaluated(h,d)||e.if((0,ae.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}J.validateUnion=ja;Object.defineProperty(et,"__esModule",{value:!0});et.validateKeywordUsage=et.validSchemaType=et.funcKeywordCode=et.macroKeywordCode=void 0;const Ne=X,Mt=nt,Fa=J,Va=kr;function Ua(t,e){const{gen:r,keyword:s,schema:n,parentSchema:i,it:o}=t,d=e.macro.call(o.self,n,i,o),l=qi(r,s,d);o.opts.validateSchema!==!1&&o.self.validateSchema(d,!0);const a=r.name("valid");t.subschema({schema:d,schemaPath:Ne.nil,errSchemaPath:`${o.errSchemaPath}/${s}`,topSchemaRef:l,compositeRule:!0},a),t.pass(a,()=>t.error(!0))}et.macroKeywordCode=Ua;function za(t,e){var r;const{gen:s,keyword:n,schema:i,parentSchema:o,$data:d,it:l}=t;xa(l,e);const a=!d&&e.compile?e.compile.call(l.self,i,o,l):e.validate,h=qi(s,n,a),f=s.let("valid");t.block$data(f,w),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function w(){if(e.errors===!1)$(),e.modifying&&ti(t),g(()=>t.error());else{const p=e.async?T():y();e.modifying&&ti(t),g(()=>La(t,p))}}function T(){const p=s.let("ruleErrs",null);return s.try(()=>$((0,Ne._)`await `),S=>s.assign(f,!1).if((0,Ne._)`${S} instanceof ${l.ValidationError}`,()=>s.assign(p,(0,Ne._)`${S}.errors`),()=>s.throw(S))),p}function y(){const p=(0,Ne._)`${h}.errors`;return s.assign(p,null),$(Ne.nil),p}function $(p=e.async?(0,Ne._)`await `:Ne.nil){const S=l.opts.passContext?Mt.default.this:Mt.default.self,O=!("compile"in e&&!d||e.schema===!1);s.assign(f,(0,Ne._)`${p}${(0,Fa.callValidateCode)(t,h,S,O)}`,e.modifying)}function g(p){var S;s.if((0,Ne.not)((S=e.valid)!==null&&S!==void 0?S:f),p)}}et.funcKeywordCode=za;function ti(t){const{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,(0,Ne._)`${s.parentData}[${s.parentDataProperty}]`))}function La(t,e){const{gen:r}=t;r.if((0,Ne._)`Array.isArray(${e})`,()=>{r.assign(Mt.default.vErrors,(0,Ne._)`${Mt.default.vErrors} === null ? ${e} : ${Mt.default.vErrors}.concat(${e})`).assign(Mt.default.errors,(0,Ne._)`${Mt.default.vErrors}.length`),(0,Va.extendErrors)(t)},()=>t.error())}function xa({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function qi(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ne.stringify)(r)})}function Ha(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t>"u")}et.validSchemaType=Ha;function Ba({schema:t,opts:e,self:r,errSchemaPath:s},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");const o=n.dependencies;if(o!=null&&o.some(d=>!Object.prototype.hasOwnProperty.call(t,d)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[i])){const l=`keyword "${i}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}et.validateKeywordUsage=Ba;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.extendSubschemaMode=Tt.extendSubschemaData=Tt.getSubschema=void 0;const Ze=X,Ki=Z;function qa(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const d=t.schema[e];return r===void 0?{schema:d,schemaPath:(0,Ze._)`${t.schemaPath}${(0,Ze.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:d[r],schemaPath:(0,Ze._)`${t.schemaPath}${(0,Ze.getProperty)(e)}${(0,Ze.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Ki.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Tt.getSubschema=qa;function Ka(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:i,propertyName:o}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=e;if(r!==void 0){const{errorPath:a,dataPathArr:h,opts:f}=e,w=d.let("data",(0,Ze._)`${e.data}${(0,Ze.getProperty)(r)}`,!0);l(w),t.errorPath=(0,Ze.str)`${a}${(0,Ki.getErrorPath)(r,s,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Ze._)`${r}`,t.dataPathArr=[...h,t.parentDataProperty]}if(n!==void 0){const a=n instanceof Ze.Name?n:d.let("data",n,!0);l(a),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function l(a){t.data=a,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,a]}}Tt.extendSubschemaData=Ka;function Ga(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:i}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Tt.extendSubschemaMode=Ga;var $e={},Gi=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,i;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){var o=i[n];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},Wi={exports:{}},wt=Wi.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};Yr(e,s,n,t,"",t)};wt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};wt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};wt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};wt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Yr(t,e,r,s,n,i,o,d,l,a){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,i,o,d,l,a);for(var h in s){var f=s[h];if(Array.isArray(f)){if(h in wt.arrayKeywords)for(var w=0;w<f.length;w++)Yr(t,e,r,f[w],n+"/"+h+"/"+w,i,n,h,s,w)}else if(h in wt.propsKeywords){if(f&&typeof f=="object")for(var T in f)Yr(t,e,r,f[T],n+"/"+h+"/"+Wa(T),i,n,h,s,T)}else(h in wt.keywords||t.allKeys&&!(h in wt.skipKeywords))&&Yr(t,e,r,f,n+"/"+h,i,n,h,s)}r(s,n,i,o,d,l,a)}}function Wa(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty($e,"__esModule",{value:!0});$e.getSchemaRefs=$e.resolveUrl=$e.normalizeId=$e._getFullPath=$e.getFullPath=$e.inlineRef=void 0;const Ja=Z,Xa=Gi,Ya=Wi.exports,Qa=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Za(t,e=!0){return typeof t=="boolean"?!0:e===!0?!jn(t):e?Ji(t)<=e:!1}$e.inlineRef=Za;const ec=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jn(t){for(const e in t){if(ec.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(jn)||typeof r=="object"&&jn(r))return!0}return!1}function Ji(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!Qa.has(r)&&(typeof t[r]=="object"&&(0,Ja.eachItem)(t[r],s=>e+=Ji(s)),e===1/0))return 1/0}return e}function Xi(t,e="",r){r!==!1&&(e=er(e));const s=t.parse(e);return Yi(t,s)}$e.getFullPath=Xi;function Yi(t,e){return t.serialize(e).split("#")[0]+"#"}$e._getFullPath=Yi;const tc=/#\/?$/;function er(t){return t?t.replace(tc,""):""}$e.normalizeId=er;function rc(t,e,r){return r=er(r),t.resolve(e,r)}$e.resolveUrl=rc;const nc=/^[a-z_][-a-z0-9._]*$/i;function sc(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:s}=this.opts,n=er(t[r]||e),i={"":n},o=Xi(s,n,!1),d={},l=new Set;return Ya(t,{allKeys:!0},(f,w,T,y)=>{if(y===void 0)return;const $=o+w;let g=i[y];typeof f[r]=="string"&&(g=p.call(this,f[r])),S.call(this,f.$anchor),S.call(this,f.$dynamicAnchor),i[w]=g;function p(O){const D=this.opts.uriResolver.resolve;if(O=er(g?D(g,O):O),l.has(O))throw h(O);l.add(O);let M=this.refs[O];return typeof M=="string"&&(M=this.refs[M]),typeof M=="object"?a(f,M.schema,O):O!==er($)&&(O[0]==="#"?(a(f,d[O],O),d[O]=f):this.refs[O]=$),O}function S(O){if(typeof O=="string"){if(!nc.test(O))throw new Error(`invalid anchor "${O}"`);p.call(this,`#${O}`)}}}),d;function a(f,w,T){if(w!==void 0&&!Xa(f,w))throw h(T)}function h(f){return new Error(`reference "${f}" resolves to more than one schema`)}}$e.getSchemaRefs=sc;Object.defineProperty(qe,"__esModule",{value:!0});qe.getData=qe.KeywordCxt=qe.validateFunctionCode=void 0;const Qi=ir,ri=Mr,Xn=dt,sn=Mr,ic=hn,$r=et,Tn=Tt,U=X,H=nt,oc=$e,ht=Z,mr=kr;function ac(t){if(to(t)&&(ro(t),eo(t))){uc(t);return}Zi(t,()=>(0,Qi.topBoolOrEmptySchema)(t))}qe.validateFunctionCode=ac;function Zi({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},i){n.code.es5?t.func(e,(0,U._)`${H.default.data}, ${H.default.valCxt}`,s.$async,()=>{t.code((0,U._)`"use strict"; ${ni(r,n)}`),lc(t,n),t.code(i)}):t.func(e,(0,U._)`${H.default.data}, ${cc(n)}`,s.$async,()=>t.code(ni(r,n)).code(i))}function cc(t){return(0,U._)`{${H.default.instancePath}="", ${H.default.parentData}, ${H.default.parentDataProperty}, ${H.default.rootData}=${H.default.data}${t.dynamicRef?(0,U._)`, ${H.default.dynamicAnchors}={}`:U.nil}}={}`}function lc(t,e){t.if(H.default.valCxt,()=>{t.var(H.default.instancePath,(0,U._)`${H.default.valCxt}.${H.default.instancePath}`),t.var(H.default.parentData,(0,U._)`${H.default.valCxt}.${H.default.parentData}`),t.var(H.default.parentDataProperty,(0,U._)`${H.default.valCxt}.${H.default.parentDataProperty}`),t.var(H.default.rootData,(0,U._)`${H.default.valCxt}.${H.default.rootData}`),e.dynamicRef&&t.var(H.default.dynamicAnchors,(0,U._)`${H.default.valCxt}.${H.default.dynamicAnchors}`)},()=>{t.var(H.default.instancePath,(0,U._)`""`),t.var(H.default.parentData,(0,U._)`undefined`),t.var(H.default.parentDataProperty,(0,U._)`undefined`),t.var(H.default.rootData,H.default.data),e.dynamicRef&&t.var(H.default.dynamicAnchors,(0,U._)`{}`)})}function uc(t){const{schema:e,opts:r,gen:s}=t;Zi(t,()=>{r.$comment&&e.$comment&&so(t),mc(t),s.let(H.default.vErrors,null),s.let(H.default.errors,0),r.unevaluated&&dc(t),no(t),gc(t)})}function dc(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,U._)`${r}.evaluated`),e.if((0,U._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,U._)`${t.evaluated}.props`,(0,U._)`undefined`)),e.if((0,U._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,U._)`${t.evaluated}.items`,(0,U._)`undefined`))}function ni(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,U._)`/*# sourceURL=${r} */`:U.nil}function hc(t,e){if(to(t)&&(ro(t),eo(t))){fc(t,e);return}(0,Qi.boolOrEmptySchema)(t,e)}function eo({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function to(t){return typeof t.schema!="boolean"}function fc(t,e){const{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&so(t),vc(t),_c(t);const i=s.const("_errs",H.default.errors);no(t,i),s.var(e,(0,U._)`${i} === ${H.default.errors}`)}function ro(t){(0,ht.checkUnknownRules)(t),pc(t)}function no(t,e){if(t.opts.jtd)return si(t,[],!1,e);const r=(0,ri.getSchemaTypes)(t.schema),s=(0,ri.coerceAndCheckDataType)(t,r);si(t,r,!s,e)}function pc(t){const{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&(0,ht.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function mc(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ht.checkStrictMode)(t,"default is ignored in the schema root")}function vc(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,oc.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function _c(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function so({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){const i=r.$comment;if(n.$comment===!0)t.code((0,U._)`${H.default.self}.logger.log(${i})`);else if(typeof n.$comment=="function"){const o=(0,U.str)`${s}/$comment`,d=t.scopeValue("root",{ref:e.root});t.code((0,U._)`${H.default.self}.opts.$comment(${i}, ${o}, ${d}.schema)`)}}function gc(t){const{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:i}=t;r.$async?e.if((0,U._)`${H.default.errors} === 0`,()=>e.return(H.default.data),()=>e.throw((0,U._)`new ${n}(${H.default.vErrors})`)):(e.assign((0,U._)`${s}.errors`,H.default.vErrors),i.unevaluated&&yc(t),e.return((0,U._)`${H.default.errors} === 0`))}function yc({gen:t,evaluated:e,props:r,items:s}){r instanceof U.Name&&t.assign((0,U._)`${e}.props`,r),s instanceof U.Name&&t.assign((0,U._)`${e}.items`,s)}function si(t,e,r,s){const{gen:n,schema:i,data:o,allErrors:d,opts:l,self:a}=t,{RULES:h}=a;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,ht.schemaHasRulesButRef)(i,h))){n.block(()=>oo(t,"$ref",h.all.$ref.definition));return}l.jtd||$c(t,e),n.block(()=>{for(const w of h.rules)f(w);f(h.post)});function f(w){(0,Xn.shouldUseGroup)(i,w)&&(w.type?(n.if((0,sn.checkDataType)(w.type,o,l.strictNumbers)),ii(t,w),e.length===1&&e[0]===w.type&&r&&(n.else(),(0,sn.reportTypeError)(t)),n.endIf()):ii(t,w),d||n.if((0,U._)`${H.default.errors} === ${s||0}`))}}function ii(t,e){const{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&(0,ic.assignDefaults)(t,e.type),r.block(()=>{for(const i of e.rules)(0,Xn.shouldUseRule)(s,i)&&oo(t,i.keyword,i.definition,e.type)})}function $c(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(bc(t,e),t.opts.allowUnionTypes||wc(t,e),Ec(t,t.dataTypes))}function bc(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{oi(t.dataTypes,r)||Yn(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>oi(e,r))}}function wc(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Yn(t,"use allowUnionTypes to allow union type keyword")}function Ec(t,e){const r=t.self.RULES.all;for(const s in r){const n=r[s];if(typeof n=="object"&&(0,Xn.shouldUseRule)(t.schema,n)){const{type:i}=n.definition;i.length&&!i.some(o=>Sc(e,o))&&Yn(t,`missing type "${i.join(",")}" for keyword "${s}"`)}}}function Sc(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function oi(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Yn(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ht.checkStrictMode)(t,e,t.opts.strictTypes)}class io{constructor(e,r,s){if((0,$r.validateKeywordUsage)(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ht.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",ao(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,$r.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",H.default.errors))}result(e,r,s){this.failResult((0,U.not)(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,U.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,U._)`${r} !== undefined && (${(0,U.or)(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?mr.reportExtraError:mr.reportError)(this,this.def.error,r)}$dataError(){(0,mr.reportError)(this,this.def.$dataError||mr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,mr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=U.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=U.nil,r=U.nil){if(!this.$data)return;const{gen:s,schemaCode:n,schemaType:i,def:o}=this;s.if((0,U.or)((0,U._)`${n} === undefined`,r)),e!==U.nil&&s.assign(e,!0),(i.length||o.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==U.nil&&s.assign(e,!1)),s.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:s,def:n,it:i}=this;return(0,U.or)(o(),d());function o(){if(s.length){if(!(r instanceof U.Name))throw new Error("ajv implementation error");const l=Array.isArray(s)?s:[s];return(0,U._)`${(0,sn.checkDataTypes)(l,r,i.opts.strictNumbers,sn.DataType.Wrong)}`}return U.nil}function d(){if(n.validateSchema){const l=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,U._)`!${l}(${r})`}return U.nil}}subschema(e,r){const s=(0,Tn.getSubschema)(this.it,e);(0,Tn.extendSubschemaData)(s,this.it,e),(0,Tn.extendSubschemaMode)(s,e);const n={...this.it,...s,items:void 0,props:void 0};return hc(n,r),n}mergeEvaluated(e,r){const{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&e.props!==void 0&&(s.props=ht.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=ht.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){const{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,U.Name)),!0}}qe.KeywordCxt=io;function oo(t,e,r,s){const n=new io(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?(0,$r.funcKeywordCode)(n,r):"macro"in r?(0,$r.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,$r.funcKeywordCode)(n,r)}const Pc=/^\/(?:[^~]|~0|~1)*$/,Tc=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ao(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,i;if(t==="")return H.default.rootData;if(t[0]==="/"){if(!Pc.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,i=H.default.rootData}else{const a=Tc.exec(t);if(!a)throw new Error(`Invalid JSON-pointer: ${t}`);const h=+a[1];if(n=a[2],n==="#"){if(h>=e)throw new Error(l("property/index",h));return s[e-h]}if(h>e)throw new Error(l("data",h));if(i=r[e-h],!n)return i}let o=i;const d=n.split("/");for(const a of d)a&&(i=(0,U._)`${i}${(0,U.getProperty)((0,ht.unescapeJsonPointer)(a))}`,o=(0,U._)`${o} && ${i}`);return o;function l(a,h){return`Cannot access ${a} ${h} levels up, current level is ${e}`}}qe.getData=ao;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});class Nc extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}jr.default=Nc;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});const Nn=$e;class Oc extends Error{constructor(e,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Nn.resolveUrl)(e,r,s),this.missingSchema=(0,Nn.normalizeId)((0,Nn.getFullPath)(e,this.missingRef))}}Fr.default=Oc;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.resolveSchema=Ce.getCompilingSchema=Ce.resolveRef=Ce.compileSchema=Ce.SchemaEnv=void 0;const xe=X,Ac=jr,kt=nt,Be=$e,ai=Z,Cc=qe;class fn{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Be.normalizeId)(s==null?void 0:s[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s==null?void 0:s.$async,this.refs={}}}Ce.SchemaEnv=fn;function Qn(t){const e=co.call(this,t);if(e)return e;const r=(0,Be.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:i}=this.opts,o=new xe.CodeGen(this.scope,{es5:s,lines:n,ownProperties:i});let d;t.$async&&(d=o.scopeValue("Error",{ref:Ac.default,code:(0,xe._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");t.validateName=l;const a={gen:o,allErrors:this.opts.allErrors,data:kt.default.data,parentData:kt.default.parentData,parentDataProperty:kt.default.parentDataProperty,dataNames:[kt.default.data],dataPathArr:[xe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,xe.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:d,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:xe.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,xe._)`""`,opts:this.opts,self:this};let h;try{this._compilations.add(t),(0,Cc.validateFunctionCode)(a),o.optimize(this.opts.code.optimize);const f=o.toString();h=`${o.scopeRefs(kt.default.scope)}return ${f}`,this.opts.code.process&&(h=this.opts.code.process(h,t));const T=new Function(`${kt.default.self}`,`${kt.default.scope}`,h)(this,this.scope.get());if(this.scope.value(l,{ref:T}),T.errors=null,T.schema=t.schema,T.schemaEnv=t,t.$async&&(T.$async=!0),this.opts.code.source===!0&&(T.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:y,items:$}=a;T.evaluated={props:y instanceof xe.Name?void 0:y,items:$ instanceof xe.Name?void 0:$,dynamicProps:y instanceof xe.Name,dynamicItems:$ instanceof xe.Name},T.source&&(T.source.evaluated=(0,xe.stringify)(T.evaluated))}return t.validate=T,t}catch(f){throw delete t.validate,delete t.validateName,h&&this.logger.error("Error compiling schema, function code:",h),f}finally{this._compilations.delete(t)}}Ce.compileSchema=Qn;function Ic(t,e,r){var s;r=(0,Be.resolveUrl)(this.opts.uriResolver,e,r);const n=t.refs[r];if(n)return n;let i=kc.call(this,t,r);if(i===void 0){const o=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:d}=this.opts;o&&(i=new fn({schema:o,schemaId:d,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Dc.call(this,i)}Ce.resolveRef=Ic;function Dc(t){return(0,Be.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Qn.call(this,t)}function co(t){for(const e of this._compilations)if(Rc(e,t))return e}Ce.getCompilingSchema=co;function Rc(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function kc(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||pn.call(this,t,e)}function pn(t,e){const r=this.opts.uriResolver.parse(e),s=(0,Be._getFullPath)(this.opts.uriResolver,r);let n=(0,Be.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return On.call(this,r,t);const i=(0,Be.normalizeId)(s),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const d=pn.call(this,t,o);return typeof(d==null?void 0:d.schema)!="object"?void 0:On.call(this,r,d)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Qn.call(this,o),i===(0,Be.normalizeId)(e)){const{schema:d}=o,{schemaId:l}=this.opts,a=d[l];return a&&(n=(0,Be.resolveUrl)(this.opts.uriResolver,n,a)),new fn({schema:d,schemaId:l,root:t,baseId:n})}return On.call(this,r,o)}}Ce.resolveSchema=pn;const Mc=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function On(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(const d of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const l=r[(0,ai.unescapeFragment)(d)];if(l===void 0)return;r=l;const a=typeof r=="object"&&r[this.opts.schemaId];!Mc.has(d)&&a&&(e=(0,Be.resolveUrl)(this.opts.uriResolver,e,a))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,ai.schemaHasRulesButRef)(r,this.RULES)){const d=(0,Be.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=pn.call(this,s,d)}const{schemaId:o}=this.opts;if(i=i||new fn({schema:r,schemaId:o,root:s,baseId:e}),i.schema!==i.root.schema)return i}const jc="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Fc="Meta-schema for $data reference (JSON AnySchema extension proposal)",Vc="object",Uc=["$data"],zc={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Lc=!1,xc={$id:jc,description:Fc,type:Vc,required:Uc,properties:zc,additionalProperties:Lc};var Zn={},Fn={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,s){s(e)})(ua,function(r){function s(){for(var m=arguments.length,u=Array(m),_=0;_<m;_++)u[_]=arguments[_];if(u.length>1){u[0]=u[0].slice(0,-1);for(var A=u.length-1,N=1;N<A;++N)u[N]=u[N].slice(1,-1);return u[A]=u[A].slice(1),u.join("")}else return u[0]}function n(m){return"(?:"+m+")"}function i(m){return m===void 0?"undefined":m===null?"null":Object.prototype.toString.call(m).split(" ").pop().split("]").shift().toLowerCase()}function o(m){return m.toUpperCase()}function d(m){return m!=null?m instanceof Array?m:typeof m.length!="number"||m.split||m.setInterval||m.call?[m]:Array.prototype.slice.call(m):[]}function l(m,u){var _=m;if(u)for(var A in u)_[A]=u[A];return _}function a(m){var u="[A-Za-z]",_="[0-9]",A=s(_,"[A-Fa-f]"),N=n(n("%[EFef]"+A+"%"+A+A+"%"+A+A)+"|"+n("%[89A-Fa-f]"+A+"%"+A+A)+"|"+n("%"+A+A)),z="[\\:\\/\\?\\#\\[\\]\\@]",L="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Q=s(z,L),ie=m?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ue=m?"[\\uE000-\\uF8FF]":"[]",Y=s(u,_,"[\\-\\.\\_\\~]",ie);n(u+s(u,_,"[\\+\\-\\.]")+"*"),n(n(N+"|"+s(Y,L,"[\\:]"))+"*");var se=n(n("25[0-5]")+"|"+n("2[0-4]"+_)+"|"+n("1"+_+_)+"|"+n("0?[1-9]"+_)+"|0?0?"+_),de=n(se+"\\."+se+"\\."+se+"\\."+se),q=n(A+"{1,4}"),ce=n(n(q+"\\:"+q)+"|"+de),me=n(n(q+"\\:")+"{6}"+ce),le=n("\\:\\:"+n(q+"\\:")+"{5}"+ce),vt=n(n(q)+"?\\:\\:"+n(q+"\\:")+"{4}"+ce),Xe=n(n(n(q+"\\:")+"{0,1}"+q)+"?\\:\\:"+n(q+"\\:")+"{3}"+ce),Ye=n(n(n(q+"\\:")+"{0,2}"+q)+"?\\:\\:"+n(q+"\\:")+"{2}"+ce),Kt=n(n(n(q+"\\:")+"{0,3}"+q)+"?\\:\\:"+q+"\\:"+ce),It=n(n(n(q+"\\:")+"{0,4}"+q)+"?\\:\\:"+ce),je=n(n(n(q+"\\:")+"{0,5}"+q)+"?\\:\\:"+q),Qe=n(n(n(q+"\\:")+"{0,6}"+q)+"?\\:\\:"),Dt=n([me,le,vt,Xe,Ye,Kt,It,je,Qe].join("|")),ut=n(n(Y+"|"+N)+"+");n("[vV]"+A+"+\\."+s(Y,L,"[\\:]")+"+"),n(n(N+"|"+s(Y,L))+"*");var hr=n(N+"|"+s(Y,L,"[\\:\\@]"));return n(n(N+"|"+s(Y,L,"[\\@]"))+"+"),n(n(hr+"|"+s("[\\/\\?]",ue))+"*"),{NOT_SCHEME:new RegExp(s("[^]",u,_,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(s("[^\\%\\:]",Y,L),"g"),NOT_HOST:new RegExp(s("[^\\%\\[\\]\\:]",Y,L),"g"),NOT_PATH:new RegExp(s("[^\\%\\/\\:\\@]",Y,L),"g"),NOT_PATH_NOSCHEME:new RegExp(s("[^\\%\\/\\@]",Y,L),"g"),NOT_QUERY:new RegExp(s("[^\\%]",Y,L,"[\\:\\@\\/\\?]",ue),"g"),NOT_FRAGMENT:new RegExp(s("[^\\%]",Y,L,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(s("[^]",Y,L),"g"),UNRESERVED:new RegExp(Y,"g"),OTHER_CHARS:new RegExp(s("[^\\%]",Y,Q),"g"),PCT_ENCODED:new RegExp(N,"g"),IPV4ADDRESS:new RegExp("^("+de+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Dt+")"+n(n("\\%25|\\%(?!"+A+"{2})")+"("+ut+")")+"?\\]?$")}}var h=a(!1),f=a(!0),w=function(){function m(u,_){var A=[],N=!0,z=!1,L=void 0;try{for(var Q=u[Symbol.iterator](),ie;!(N=(ie=Q.next()).done)&&(A.push(ie.value),!(_&&A.length===_));N=!0);}catch(ue){z=!0,L=ue}finally{try{!N&&Q.return&&Q.return()}finally{if(z)throw L}}return A}return function(u,_){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return m(u,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(m){if(Array.isArray(m)){for(var u=0,_=Array(m.length);u<m.length;u++)_[u]=m[u];return _}else return Array.from(m)},y=2147483647,$=36,g=1,p=26,S=38,O=700,D=72,M=128,E="-",C=/^xn--/,k=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=$-g,K=Math.floor,pe=String.fromCharCode;function ne(m){throw new RangeError(B[m])}function Pe(m,u){for(var _=[],A=m.length;A--;)_[A]=u(m[A]);return _}function Te(m,u){var _=m.split("@"),A="";_.length>1&&(A=_[0]+"@",m=_[1]),m=m.replace(x,".");var N=m.split("."),z=Pe(N,u).join(".");return A+z}function Re(m){for(var u=[],_=0,A=m.length;_<A;){var N=m.charCodeAt(_++);if(N>=55296&&N<=56319&&_<A){var z=m.charCodeAt(_++);(z&64512)==56320?u.push(((N&1023)<<10)+(z&1023)+65536):(u.push(N),_--)}else u.push(N)}return u}var ze=function(u){return String.fromCodePoint.apply(String,T(u))},ke=function(u){return u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:$},j=function(u,_){return u+22+75*(u<26)-((_!=0)<<5)},b=function(u,_,A){var N=0;for(u=A?K(u/O):u>>1,u+=K(u/_);u>te*p>>1;N+=$)u=K(u/te);return K(N+(te+1)*u/(u+S))},R=function(u){var _=[],A=u.length,N=0,z=M,L=D,Q=u.lastIndexOf(E);Q<0&&(Q=0);for(var ie=0;ie<Q;++ie)u.charCodeAt(ie)>=128&&ne("not-basic"),_.push(u.charCodeAt(ie));for(var ue=Q>0?Q+1:0;ue<A;){for(var Y=N,se=1,de=$;;de+=$){ue>=A&&ne("invalid-input");var q=ke(u.charCodeAt(ue++));(q>=$||q>K((y-N)/se))&&ne("overflow"),N+=q*se;var ce=de<=L?g:de>=L+p?p:de-L;if(q<ce)break;var me=$-ce;se>K(y/me)&&ne("overflow"),se*=me}var le=_.length+1;L=b(N-Y,le,Y==0),K(N/le)>y-z&&ne("overflow"),z+=K(N/le),N%=le,_.splice(N++,0,z)}return String.fromCodePoint.apply(String,_)},P=function(u){var _=[];u=Re(u);var A=u.length,N=M,z=0,L=D,Q=!0,ie=!1,ue=void 0;try{for(var Y=u[Symbol.iterator](),se;!(Q=(se=Y.next()).done);Q=!0){var de=se.value;de<128&&_.push(pe(de))}}catch(fr){ie=!0,ue=fr}finally{try{!Q&&Y.return&&Y.return()}finally{if(ie)throw ue}}var q=_.length,ce=q;for(q&&_.push(E);ce<A;){var me=y,le=!0,vt=!1,Xe=void 0;try{for(var Ye=u[Symbol.iterator](),Kt;!(le=(Kt=Ye.next()).done);le=!0){var It=Kt.value;It>=N&&It<me&&(me=It)}}catch(fr){vt=!0,Xe=fr}finally{try{!le&&Ye.return&&Ye.return()}finally{if(vt)throw Xe}}var je=ce+1;me-N>K((y-z)/je)&&ne("overflow"),z+=(me-N)*je,N=me;var Qe=!0,Dt=!1,ut=void 0;try{for(var hr=u[Symbol.iterator](),Vs;!(Qe=(Vs=hr.next()).done);Qe=!0){var Us=Vs.value;if(Us<N&&++z>y&&ne("overflow"),Us==N){for(var Lr=z,xr=$;;xr+=$){var Hr=xr<=L?g:xr>=L+p?p:xr-L;if(Lr<Hr)break;var zs=Lr-Hr,Ls=$-Hr;_.push(pe(j(Hr+zs%Ls,0))),Lr=K(zs/Ls)}_.push(pe(j(Lr,0))),L=b(z,je,ce==q),z=0,++ce}}}catch(fr){Dt=!0,ut=fr}finally{try{!Qe&&hr.return&&hr.return()}finally{if(Dt)throw ut}}++z,++N}return _.join("")},c=function(u){return Te(u,function(_){return C.test(_)?R(_.slice(4).toLowerCase()):_})},v=function(u){return Te(u,function(_){return k.test(_)?"xn--"+P(_):_})},I={version:"2.1.0",ucs2:{decode:Re,encode:ze},decode:R,encode:P,toASCII:v,toUnicode:c},F={};function V(m){var u=m.charCodeAt(0),_=void 0;return u<16?_="%0"+u.toString(16).toUpperCase():u<128?_="%"+u.toString(16).toUpperCase():u<2048?_="%"+(u>>6|192).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase():_="%"+(u>>12|224).toString(16).toUpperCase()+"%"+(u>>6&63|128).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase(),_}function G(m){for(var u="",_=0,A=m.length;_<A;){var N=parseInt(m.substr(_+1,2),16);if(N<128)u+=String.fromCharCode(N),_+=3;else if(N>=194&&N<224){if(A-_>=6){var z=parseInt(m.substr(_+4,2),16);u+=String.fromCharCode((N&31)<<6|z&63)}else u+=m.substr(_,6);_+=6}else if(N>=224){if(A-_>=9){var L=parseInt(m.substr(_+4,2),16),Q=parseInt(m.substr(_+7,2),16);u+=String.fromCharCode((N&15)<<12|(L&63)<<6|Q&63)}else u+=m.substr(_,9);_+=9}else u+=m.substr(_,3),_+=3}return u}function W(m,u){function _(A){var N=G(A);return N.match(u.UNRESERVED)?N:A}return m.scheme&&(m.scheme=String(m.scheme).replace(u.PCT_ENCODED,_).toLowerCase().replace(u.NOT_SCHEME,"")),m.userinfo!==void 0&&(m.userinfo=String(m.userinfo).replace(u.PCT_ENCODED,_).replace(u.NOT_USERINFO,V).replace(u.PCT_ENCODED,o)),m.host!==void 0&&(m.host=String(m.host).replace(u.PCT_ENCODED,_).toLowerCase().replace(u.NOT_HOST,V).replace(u.PCT_ENCODED,o)),m.path!==void 0&&(m.path=String(m.path).replace(u.PCT_ENCODED,_).replace(m.scheme?u.NOT_PATH:u.NOT_PATH_NOSCHEME,V).replace(u.PCT_ENCODED,o)),m.query!==void 0&&(m.query=String(m.query).replace(u.PCT_ENCODED,_).replace(u.NOT_QUERY,V).replace(u.PCT_ENCODED,o)),m.fragment!==void 0&&(m.fragment=String(m.fragment).replace(u.PCT_ENCODED,_).replace(u.NOT_FRAGMENT,V).replace(u.PCT_ENCODED,o)),m}function re(m){return m.replace(/^0*(.*)/,"$1")||"0"}function be(m,u){var _=m.match(u.IPV4ADDRESS)||[],A=w(_,2),N=A[1];return N?N.split(".").map(re).join("."):m}function Le(m,u){var _=m.match(u.IPV6ADDRESS)||[],A=w(_,3),N=A[1],z=A[2];if(N){for(var L=N.toLowerCase().split("::").reverse(),Q=w(L,2),ie=Q[0],ue=Q[1],Y=ue?ue.split(":").map(re):[],se=ie.split(":").map(re),de=u.IPV4ADDRESS.test(se[se.length-1]),q=de?7:8,ce=se.length-q,me=Array(q),le=0;le<q;++le)me[le]=Y[le]||se[ce+le]||"";de&&(me[q-1]=be(me[q-1],u));var vt=me.reduce(function(je,Qe,Dt){if(!Qe||Qe==="0"){var ut=je[je.length-1];ut&&ut.index+ut.length===Dt?ut.length++:je.push({index:Dt,length:1})}return je},[]),Xe=vt.sort(function(je,Qe){return Qe.length-je.length})[0],Ye=void 0;if(Xe&&Xe.length>1){var Kt=me.slice(0,Xe.index),It=me.slice(Xe.index+Xe.length);Ye=Kt.join(":")+"::"+It.join(":")}else Ye=me.join(":");return z&&(Ye+="%"+z),Ye}else return m}var it=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ot="".match(/(){0}/)[1]===void 0;function ge(m){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_={},A=u.iri!==!1?f:h;u.reference==="suffix"&&(m=(u.scheme?u.scheme+":":"")+"//"+m);var N=m.match(it);if(N){ot?(_.scheme=N[1],_.userinfo=N[3],_.host=N[4],_.port=parseInt(N[5],10),_.path=N[6]||"",_.query=N[7],_.fragment=N[8],isNaN(_.port)&&(_.port=N[5])):(_.scheme=N[1]||void 0,_.userinfo=m.indexOf("@")!==-1?N[3]:void 0,_.host=m.indexOf("//")!==-1?N[4]:void 0,_.port=parseInt(N[5],10),_.path=N[6]||"",_.query=m.indexOf("?")!==-1?N[7]:void 0,_.fragment=m.indexOf("#")!==-1?N[8]:void 0,isNaN(_.port)&&(_.port=m.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?N[4]:void 0)),_.host&&(_.host=Le(be(_.host,A),A)),_.scheme===void 0&&_.userinfo===void 0&&_.host===void 0&&_.port===void 0&&!_.path&&_.query===void 0?_.reference="same-document":_.scheme===void 0?_.reference="relative":_.fragment===void 0?_.reference="absolute":_.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==_.reference&&(_.error=_.error||"URI is not a "+u.reference+" reference.");var z=F[(u.scheme||_.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!z||!z.unicodeSupport)){if(_.host&&(u.domainHost||z&&z.domainHost))try{_.host=I.toASCII(_.host.replace(A.PCT_ENCODED,G).toLowerCase())}catch(L){_.error=_.error||"Host's domain name can not be converted to ASCII via punycode: "+L}W(_,h)}else W(_,A);z&&z.parse&&z.parse(_,u)}else _.error=_.error||"URI can not be parsed.";return _}function at(m,u){var _=u.iri!==!1?f:h,A=[];return m.userinfo!==void 0&&(A.push(m.userinfo),A.push("@")),m.host!==void 0&&A.push(Le(be(String(m.host),_),_).replace(_.IPV6ADDRESS,function(N,z,L){return"["+z+(L?"%25"+L:"")+"]"})),(typeof m.port=="number"||typeof m.port=="string")&&(A.push(":"),A.push(String(m.port))),A.length?A.join(""):void 0}var Ke=/^\.\.?\//,Ge=/^\/\.(\/|$)/,We=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function Me(m){for(var u=[];m.length;)if(m.match(Ke))m=m.replace(Ke,"");else if(m.match(Ge))m=m.replace(Ge,"/");else if(m.match(We))m=m.replace(We,"/"),u.pop();else if(m==="."||m==="..")m="";else{var _=m.match(Ot);if(_){var A=_[0];m=m.slice(A.length),u.push(A)}else throw new Error("Unexpected dot segment condition")}return u.join("")}function we(m){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=u.iri?f:h,A=[],N=F[(u.scheme||m.scheme||"").toLowerCase()];if(N&&N.serialize&&N.serialize(m,u),m.host&&!_.IPV6ADDRESS.test(m.host)){if(u.domainHost||N&&N.domainHost)try{m.host=u.iri?I.toUnicode(m.host):I.toASCII(m.host.replace(_.PCT_ENCODED,G).toLowerCase())}catch(Q){m.error=m.error||"Host's domain name can not be converted to "+(u.iri?"Unicode":"ASCII")+" via punycode: "+Q}}W(m,_),u.reference!=="suffix"&&m.scheme&&(A.push(m.scheme),A.push(":"));var z=at(m,u);if(z!==void 0&&(u.reference!=="suffix"&&A.push("//"),A.push(z),m.path&&m.path.charAt(0)!=="/"&&A.push("/")),m.path!==void 0){var L=m.path;!u.absolutePath&&(!N||!N.absolutePath)&&(L=Me(L)),z===void 0&&(L=L.replace(/^\/\//,"/%2F")),A.push(L)}return m.query!==void 0&&(A.push("?"),A.push(m.query)),m.fragment!==void 0&&(A.push("#"),A.push(m.fragment)),A.join("")}function pt(m,u){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments[3],N={};return A||(m=ge(we(m,_),_),u=ge(we(u,_),_)),_=_||{},!_.tolerant&&u.scheme?(N.scheme=u.scheme,N.userinfo=u.userinfo,N.host=u.host,N.port=u.port,N.path=Me(u.path||""),N.query=u.query):(u.userinfo!==void 0||u.host!==void 0||u.port!==void 0?(N.userinfo=u.userinfo,N.host=u.host,N.port=u.port,N.path=Me(u.path||""),N.query=u.query):(u.path?(u.path.charAt(0)==="/"?N.path=Me(u.path):((m.userinfo!==void 0||m.host!==void 0||m.port!==void 0)&&!m.path?N.path="/"+u.path:m.path?N.path=m.path.slice(0,m.path.lastIndexOf("/")+1)+u.path:N.path=u.path,N.path=Me(N.path)),N.query=u.query):(N.path=m.path,u.query!==void 0?N.query=u.query:N.query=m.query),N.userinfo=m.userinfo,N.host=m.host,N.port=m.port),N.scheme=m.scheme),N.fragment=u.fragment,N}function At(m,u,_){var A=l({scheme:"null"},_);return we(pt(ge(m,A),ge(u,A),A,!0),A)}function ct(m,u){return typeof m=="string"?m=we(ge(m,u),u):i(m)==="object"&&(m=ge(we(m,u),u)),m}function Ct(m,u,_){return typeof m=="string"?m=we(ge(m,_),_):i(m)==="object"&&(m=we(m,_)),typeof u=="string"?u=we(ge(u,_),_):i(u)==="object"&&(u=we(u,_)),m===u}function Ht(m,u){return m&&m.toString().replace(!u||!u.iri?h.ESCAPE:f.ESCAPE,V)}function Oe(m,u){return m&&m.toString().replace(!u||!u.iri?h.PCT_ENCODED:f.PCT_ENCODED,G)}var lt={scheme:"http",domainHost:!0,parse:function(u,_){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u},serialize:function(u,_){var A=String(u.scheme).toLowerCase()==="https";return(u.port===(A?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}},zr={scheme:"https",domainHost:lt.domainHost,parse:lt.parse,serialize:lt.serialize};function dr(m){return typeof m.secure=="boolean"?m.secure:String(m.scheme).toLowerCase()==="wss"}var mt={scheme:"ws",domainHost:!0,parse:function(u,_){var A=u;return A.secure=dr(A),A.resourceName=(A.path||"/")+(A.query?"?"+A.query:""),A.path=void 0,A.query=void 0,A},serialize:function(u,_){if((u.port===(dr(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){var A=u.resourceName.split("?"),N=w(A,2),z=N[0],L=N[1];u.path=z&&z!=="/"?z:void 0,u.query=L,u.resourceName=void 0}return u.fragment=void 0,u}},Bt={scheme:"wss",domainHost:mt.domainHost,parse:mt.parse,serialize:mt.serialize},Oo={},Rs="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Je="[0-9A-Fa-f]",Ao=n(n("%[EFef]"+Je+"%"+Je+Je+"%"+Je+Je)+"|"+n("%[89A-Fa-f]"+Je+"%"+Je+Je)+"|"+n("%"+Je+Je)),Co="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Io="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Do=s(Io,'[\\"\\\\]'),Ro="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ko=new RegExp(Rs,"g"),qt=new RegExp(Ao,"g"),Mo=new RegExp(s("[^]",Co,"[\\.]",'[\\"]',Do),"g"),ks=new RegExp(s("[^]",Rs,Ro),"g"),jo=ks;function gn(m){var u=G(m);return u.match(ko)?u:m}var Ms={scheme:"mailto",parse:function(u,_){var A=u,N=A.to=A.path?A.path.split(","):[];if(A.path=void 0,A.query){for(var z=!1,L={},Q=A.query.split("&"),ie=0,ue=Q.length;ie<ue;++ie){var Y=Q[ie].split("=");switch(Y[0]){case"to":for(var se=Y[1].split(","),de=0,q=se.length;de<q;++de)N.push(se[de]);break;case"subject":A.subject=Oe(Y[1],_);break;case"body":A.body=Oe(Y[1],_);break;default:z=!0,L[Oe(Y[0],_)]=Oe(Y[1],_);break}}z&&(A.headers=L)}A.query=void 0;for(var ce=0,me=N.length;ce<me;++ce){var le=N[ce].split("@");if(le[0]=Oe(le[0]),_.unicodeSupport)le[1]=Oe(le[1],_).toLowerCase();else try{le[1]=I.toASCII(Oe(le[1],_).toLowerCase())}catch(vt){A.error=A.error||"Email address's domain name can not be converted to ASCII via punycode: "+vt}N[ce]=le.join("@")}return A},serialize:function(u,_){var A=u,N=d(u.to);if(N){for(var z=0,L=N.length;z<L;++z){var Q=String(N[z]),ie=Q.lastIndexOf("@"),ue=Q.slice(0,ie).replace(qt,gn).replace(qt,o).replace(Mo,V),Y=Q.slice(ie+1);try{Y=_.iri?I.toUnicode(Y):I.toASCII(Oe(Y,_).toLowerCase())}catch(ce){A.error=A.error||"Email address's domain name can not be converted to "+(_.iri?"Unicode":"ASCII")+" via punycode: "+ce}N[z]=ue+"@"+Y}A.path=N.join(",")}var se=u.headers=u.headers||{};u.subject&&(se.subject=u.subject),u.body&&(se.body=u.body);var de=[];for(var q in se)se[q]!==Oo[q]&&de.push(q.replace(qt,gn).replace(qt,o).replace(ks,V)+"="+se[q].replace(qt,gn).replace(qt,o).replace(jo,V));return de.length&&(A.query=de.join("&")),A}},Fo=/^([^\:]+)\:(.*)/,js={scheme:"urn",parse:function(u,_){var A=u.path&&u.path.match(Fo),N=u;if(A){var z=_.scheme||N.scheme||"urn",L=A[1].toLowerCase(),Q=A[2],ie=z+":"+(_.nid||L),ue=F[ie];N.nid=L,N.nss=Q,N.path=void 0,ue&&(N=ue.parse(N,_))}else N.error=N.error||"URN can not be parsed.";return N},serialize:function(u,_){var A=_.scheme||u.scheme||"urn",N=u.nid,z=A+":"+(_.nid||N),L=F[z];L&&(u=L.serialize(u,_));var Q=u,ie=u.nss;return Q.path=(N||_.nid)+":"+ie,Q}},Vo=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Fs={scheme:"urn:uuid",parse:function(u,_){var A=u;return A.uuid=A.nss,A.nss=void 0,!_.tolerant&&(!A.uuid||!A.uuid.match(Vo))&&(A.error=A.error||"UUID is not valid."),A},serialize:function(u,_){var A=u;return A.nss=(u.uuid||"").toLowerCase(),A}};F[lt.scheme]=lt,F[zr.scheme]=zr,F[mt.scheme]=mt,F[Bt.scheme]=Bt,F[Ms.scheme]=Ms,F[js.scheme]=js,F[Fs.scheme]=Fs,r.SCHEMES=F,r.pctEncChar=V,r.pctDecChars=G,r.parse=ge,r.removeDotSegments=Me,r.serialize=we,r.resolveComponents=pt,r.resolve=At,r.normalize=ct,r.equal=Ct,r.escapeComponent=Ht,r.unescapeComponent=Oe,Object.defineProperty(r,"__esModule",{value:!0})})})(Fn,Fn.exports);Object.defineProperty(Zn,"__esModule",{value:!0});const lo=Fn.exports;lo.code='require("ajv/dist/runtime/uri").default';Zn.default=lo;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=qe;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=X;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=jr,n=Fr,i=zt,o=Ce,d=X,l=$e,a=Mr,h=Z,f=xc,w=Zn,T=(j,b)=>new RegExp(j,b);T.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],$=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S=200;function O(j){var b,R,P,c,v,I,F,V,G,W,re,be,Le,it,ot,ge,at,Ke,Ge,We,Ot,Me,we,pt,At;const ct=j.strict,Ct=(b=j.code)===null||b===void 0?void 0:b.optimize,Ht=Ct===!0||Ct===void 0?1:Ct||0,Oe=(P=(R=j.code)===null||R===void 0?void 0:R.regExp)!==null&&P!==void 0?P:T,lt=(c=j.uriResolver)!==null&&c!==void 0?c:w.default;return{strictSchema:(I=(v=j.strictSchema)!==null&&v!==void 0?v:ct)!==null&&I!==void 0?I:!0,strictNumbers:(V=(F=j.strictNumbers)!==null&&F!==void 0?F:ct)!==null&&V!==void 0?V:!0,strictTypes:(W=(G=j.strictTypes)!==null&&G!==void 0?G:ct)!==null&&W!==void 0?W:"log",strictTuples:(be=(re=j.strictTuples)!==null&&re!==void 0?re:ct)!==null&&be!==void 0?be:"log",strictRequired:(it=(Le=j.strictRequired)!==null&&Le!==void 0?Le:ct)!==null&&it!==void 0?it:!1,code:j.code?{...j.code,optimize:Ht,regExp:Oe}:{optimize:Ht,regExp:Oe},loopRequired:(ot=j.loopRequired)!==null&&ot!==void 0?ot:S,loopEnum:(ge=j.loopEnum)!==null&&ge!==void 0?ge:S,meta:(at=j.meta)!==null&&at!==void 0?at:!0,messages:(Ke=j.messages)!==null&&Ke!==void 0?Ke:!0,inlineRefs:(Ge=j.inlineRefs)!==null&&Ge!==void 0?Ge:!0,schemaId:(We=j.schemaId)!==null&&We!==void 0?We:"$id",addUsedSchema:(Ot=j.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(Me=j.validateSchema)!==null&&Me!==void 0?Me:!0,validateFormats:(we=j.validateFormats)!==null&&we!==void 0?we:!0,unicodeRegExp:(pt=j.unicodeRegExp)!==null&&pt!==void 0?pt:!0,int32range:(At=j.int32range)!==null&&At!==void 0?At:!0,uriResolver:lt}}class D{constructor(b={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,b=this.opts={...b,...O(b)};const{es5:R,lines:P}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:$,es5:R,lines:P}),this.logger=K(b.logger);const c=b.validateFormats;b.validateFormats=!1,this.RULES=(0,i.getRules)(),M.call(this,g,b,"NOT SUPPORTED"),M.call(this,p,b,"DEPRECATED","warn"),this._metaOpts=B.call(this),b.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),b.keywords&&x.call(this,b.keywords),typeof b.meta=="object"&&this.addMetaSchema(b.meta),C.call(this),b.validateFormats=c}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:b,meta:R,schemaId:P}=this.opts;let c=f;P==="id"&&(c={...f},c.id=c.$id,delete c.$id),R&&b&&this.addMetaSchema(c,c[P],!1)}defaultMeta(){const{meta:b,schemaId:R}=this.opts;return this.opts.defaultMeta=typeof b=="object"?b[R]||b:void 0}validate(b,R){let P;if(typeof b=="string"){if(P=this.getSchema(b),!P)throw new Error(`no schema with key or ref "${b}"`)}else P=this.compile(b);const c=P(R);return"$async"in P||(this.errors=P.errors),c}compile(b,R){const P=this._addSchema(b,R);return P.validate||this._compileSchemaEnv(P)}compileAsync(b,R){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:P}=this.opts;return c.call(this,b,R);async function c(W,re){await v.call(this,W.$schema);const be=this._addSchema(W,re);return be.validate||I.call(this,be)}async function v(W){W&&!this.getSchema(W)&&await c.call(this,{$ref:W},!0)}async function I(W){try{return this._compileSchemaEnv(W)}catch(re){if(!(re instanceof n.default))throw re;return F.call(this,re),await V.call(this,re.missingSchema),I.call(this,W)}}function F({missingSchema:W,missingRef:re}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${re} cannot be resolved`)}async function V(W){const re=await G.call(this,W);this.refs[W]||await v.call(this,re.$schema),this.refs[W]||this.addSchema(re,W,R)}async function G(W){const re=this._loading[W];if(re)return re;try{return await(this._loading[W]=P(W))}finally{delete this._loading[W]}}}addSchema(b,R,P,c=this.opts.validateSchema){if(Array.isArray(b)){for(const I of b)this.addSchema(I,void 0,P,c);return this}let v;if(typeof b=="object"){const{schemaId:I}=this.opts;if(v=b[I],v!==void 0&&typeof v!="string")throw new Error(`schema ${I} must be string`)}return R=(0,l.normalizeId)(R||v),this._checkUnique(R),this.schemas[R]=this._addSchema(b,P,R,c,!0),this}addMetaSchema(b,R,P=this.opts.validateSchema){return this.addSchema(b,R,!0,P),this}validateSchema(b,R){if(typeof b=="boolean")return!0;let P;if(P=b.$schema,P!==void 0&&typeof P!="string")throw new Error("$schema must be a string");if(P=P||this.opts.defaultMeta||this.defaultMeta(),!P)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const c=this.validate(P,b);if(!c&&R){const v="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(v);else throw new Error(v)}return c}getSchema(b){let R;for(;typeof(R=E.call(this,b))=="string";)b=R;if(R===void 0){const{schemaId:P}=this.opts,c=new o.SchemaEnv({schema:{},schemaId:P});if(R=o.resolveSchema.call(this,c,b),!R)return;this.refs[b]=R}return R.validate||this._compileSchemaEnv(R)}removeSchema(b){if(b instanceof RegExp)return this._removeAllSchemas(this.schemas,b),this._removeAllSchemas(this.refs,b),this;switch(typeof b){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const R=E.call(this,b);return typeof R=="object"&&this._cache.delete(R.schema),delete this.schemas[b],delete this.refs[b],this}case"object":{const R=b;this._cache.delete(R);let P=b[this.opts.schemaId];return P&&(P=(0,l.normalizeId)(P),delete this.schemas[P],delete this.refs[P]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(b){for(const R of b)this.addKeyword(R);return this}addKeyword(b,R){let P;if(typeof b=="string")P=b,typeof R=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),R.keyword=P);else if(typeof b=="object"&&R===void 0){if(R=b,P=R.keyword,Array.isArray(P)&&!P.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ne.call(this,P,R),!R)return(0,h.eachItem)(P,v=>Pe.call(this,v)),this;Re.call(this,R);const c={...R,type:(0,a.getJSONTypes)(R.type),schemaType:(0,a.getJSONTypes)(R.schemaType)};return(0,h.eachItem)(P,c.type.length===0?v=>Pe.call(this,v,c):v=>c.type.forEach(I=>Pe.call(this,v,c,I))),this}getKeyword(b){const R=this.RULES.all[b];return typeof R=="object"?R.definition:!!R}removeKeyword(b){const{RULES:R}=this;delete R.keywords[b],delete R.all[b];for(const P of R.rules){const c=P.rules.findIndex(v=>v.keyword===b);c>=0&&P.rules.splice(c,1)}return this}addFormat(b,R){return typeof R=="string"&&(R=new RegExp(R)),this.formats[b]=R,this}errorsText(b=this.errors,{separator:R=", ",dataVar:P="data"}={}){return!b||b.length===0?"No errors":b.map(c=>`${P}${c.instancePath} ${c.message}`).reduce((c,v)=>c+R+v)}$dataMetaSchema(b,R){const P=this.RULES.all;b=JSON.parse(JSON.stringify(b));for(const c of R){const v=c.split("/").slice(1);let I=b;for(const F of v)I=I[F];for(const F in P){const V=P[F];if(typeof V!="object")continue;const{$data:G}=V.definition,W=I[F];G&&W&&(I[F]=ke(W))}}return b}_removeAllSchemas(b,R){for(const P in b){const c=b[P];(!R||R.test(P))&&(typeof c=="string"?delete b[P]:c&&!c.meta&&(this._cache.delete(c.schema),delete b[P]))}}_addSchema(b,R,P,c=this.opts.validateSchema,v=this.opts.addUsedSchema){let I;const{schemaId:F}=this.opts;if(typeof b=="object")I=b[F];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof b!="boolean")throw new Error("schema must be object or boolean")}let V=this._cache.get(b);if(V!==void 0)return V;P=(0,l.normalizeId)(I||P);const G=l.getSchemaRefs.call(this,b,P);return V=new o.SchemaEnv({schema:b,schemaId:F,meta:R,baseId:P,localRefs:G}),this._cache.set(V.schema,V),v&&!P.startsWith("#")&&(P&&this._checkUnique(P),this.refs[P]=V),c&&this.validateSchema(b,!0),V}_checkUnique(b){if(this.schemas[b]||this.refs[b])throw new Error(`schema with key or id "${b}" already exists`)}_compileSchemaEnv(b){if(b.meta?this._compileMetaSchema(b):o.compileSchema.call(this,b),!b.validate)throw new Error("ajv implementation error");return b.validate}_compileMetaSchema(b){const R=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,b)}finally{this.opts=R}}}t.default=D,D.ValidationError=s.default,D.MissingRefError=n.default;function M(j,b,R,P="error"){for(const c in j){const v=c;v in b&&this.logger[P](`${R}: option ${c}. ${j[v]}`)}}function E(j){return j=(0,l.normalizeId)(j),this.schemas[j]||this.refs[j]}function C(){const j=this.opts.schemas;if(j)if(Array.isArray(j))this.addSchema(j);else for(const b in j)this.addSchema(j[b],b)}function k(){for(const j in this.opts.formats){const b=this.opts.formats[j];b&&this.addFormat(j,b)}}function x(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const b in j){const R=j[b];R.keyword||(R.keyword=b),this.addKeyword(R)}}function B(){const j={...this.opts};for(const b of y)delete j[b];return j}const te={log(){},warn(){},error(){}};function K(j){if(j===!1)return te;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const pe=/^[a-z_$][a-z0-9_$:-]*$/i;function ne(j,b){const{RULES:R}=this;if((0,h.eachItem)(j,P=>{if(R.keywords[P])throw new Error(`Keyword ${P} is already defined`);if(!pe.test(P))throw new Error(`Keyword ${P} has invalid name`)}),!!b&&b.$data&&!("code"in b||"validate"in b))throw new Error('$data keyword must have "code" or "validate" function')}function Pe(j,b,R){var P;const c=b==null?void 0:b.post;if(R&&c)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:v}=this;let I=c?v.post:v.rules.find(({type:V})=>V===R);if(I||(I={type:R,rules:[]},v.rules.push(I)),v.keywords[j]=!0,!b)return;const F={keyword:j,definition:{...b,type:(0,a.getJSONTypes)(b.type),schemaType:(0,a.getJSONTypes)(b.schemaType)}};b.before?Te.call(this,I,F,b.before):I.rules.push(F),v.all[j]=F,(P=b.implements)===null||P===void 0||P.forEach(V=>this.addKeyword(V))}function Te(j,b,R){const P=j.rules.findIndex(c=>c.keyword===R);P>=0?j.rules.splice(P,0,b):(j.rules.push(b),this.logger.warn(`rule ${R} is not defined`))}function Re(j){let{metaSchema:b}=j;b!==void 0&&(j.$data&&this.opts.$data&&(b=ke(b)),j.validateSchema=this.compile(b,!0))}const ze={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ke(j){return{anyOf:[j,ze]}}})(Ui);var es={},ts={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});const Hc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};rs.default=Hc;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.callRef=Lt.getValidate=void 0;const Bc=Fr,ci=J,Ae=X,Wt=nt,li=Ce,Br=Z,qc={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:i,validateName:o,opts:d,self:l}=s,{root:a}=i;if((r==="#"||r==="#/")&&n===a.baseId)return f();const h=li.resolveRef.call(l,a,n,r);if(h===void 0)throw new Bc.default(s.opts.uriResolver,n,r);if(h instanceof li.SchemaEnv)return w(h);return T(h);function f(){if(i===a)return Qr(t,o,i,i.$async);const y=e.scopeValue("root",{ref:a});return Qr(t,(0,Ae._)`${y}.validate`,a,a.$async)}function w(y){const $=uo(t,y);Qr(t,$,y,y.$async)}function T(y){const $=e.scopeValue("schema",d.code.source===!0?{ref:y,code:(0,Ae.stringify)(y)}:{ref:y}),g=e.name("valid"),p=t.subschema({schema:y,dataTypes:[],schemaPath:Ae.nil,topSchemaRef:$,errSchemaPath:r},g);t.mergeEvaluated(p),t.ok(g)}}};function uo(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ae._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Lt.getValidate=uo;function Qr(t,e,r,s){const{gen:n,it:i}=t,{allErrors:o,schemaEnv:d,opts:l}=i,a=l.passContext?Wt.default.this:Ae.nil;s?h():f();function h(){if(!d.$async)throw new Error("async schema referenced by sync schema");const y=n.let("valid");n.try(()=>{n.code((0,Ae._)`await ${(0,ci.callValidateCode)(t,e,a)}`),T(e),o||n.assign(y,!0)},$=>{n.if((0,Ae._)`!(${$} instanceof ${i.ValidationError})`,()=>n.throw($)),w($),o||n.assign(y,!1)}),t.ok(y)}function f(){t.result((0,ci.callValidateCode)(t,e,a),()=>T(e),()=>w(e))}function w(y){const $=(0,Ae._)`${y}.errors`;n.assign(Wt.default.vErrors,(0,Ae._)`${Wt.default.vErrors} === null ? ${$} : ${Wt.default.vErrors}.concat(${$})`),n.assign(Wt.default.errors,(0,Ae._)`${Wt.default.vErrors}.length`)}function T(y){var $;if(!i.opts.unevaluated)return;const g=($=r==null?void 0:r.validate)===null||$===void 0?void 0:$.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=Br.mergeEvaluated.props(n,g.props,i.props));else{const p=n.var("props",(0,Ae._)`${y}.evaluated.props`);i.props=Br.mergeEvaluated.props(n,p,i.props,Ae.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=Br.mergeEvaluated.items(n,g.items,i.items));else{const p=n.var("items",(0,Ae._)`${y}.evaluated.items`);i.items=Br.mergeEvaluated.items(n,p,i.items,Ae.Name)}}}Lt.callRef=Qr;Lt.default=qc;Object.defineProperty(ts,"__esModule",{value:!0});const Kc=rs,Gc=Lt,Wc=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Kc.default,Gc.default];ts.default=Wc;var ns={},ss={};Object.defineProperty(ss,"__esModule",{value:!0});const on=X,gt=on.operators,an={maximum:{okStr:"<=",ok:gt.LTE,fail:gt.GT},minimum:{okStr:">=",ok:gt.GTE,fail:gt.LT},exclusiveMaximum:{okStr:"<",ok:gt.LT,fail:gt.GTE},exclusiveMinimum:{okStr:">",ok:gt.GT,fail:gt.LTE}},Jc={message:({keyword:t,schemaCode:e})=>(0,on.str)`must be ${an[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,on._)`{comparison: ${an[t].okStr}, limit: ${e}}`},Xc={keyword:Object.keys(an),type:"number",schemaType:"number",$data:!0,error:Jc,code(t){const{keyword:e,data:r,schemaCode:s}=t;t.fail$data((0,on._)`${r} ${an[e].fail} ${s} || isNaN(${r})`)}};ss.default=Xc;var is={};Object.defineProperty(is,"__esModule",{value:!0});const br=X,Yc={message:({schemaCode:t})=>(0,br.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,br._)`{multipleOf: ${t}}`},Qc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Yc,code(t){const{gen:e,data:r,schemaCode:s,it:n}=t,i=n.opts.multipleOfPrecision,o=e.let("res"),d=i?(0,br._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,br._)`${o} !== parseInt(${o})`;t.fail$data((0,br._)`(${s} === 0 || (${o} = ${r}/${s}, ${d}))`)}};is.default=Qc;var os={},as={};Object.defineProperty(as,"__esModule",{value:!0});function ho(t){const e=t.length;let r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)===56320&&s++);return r}as.default=ho;ho.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(os,"__esModule",{value:!0});const jt=X,Zc=Z,el=as,tl={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,jt.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,jt._)`{limit: ${t}}`},rl={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:tl,code(t){const{keyword:e,data:r,schemaCode:s,it:n}=t,i=e==="maxLength"?jt.operators.GT:jt.operators.LT,o=n.opts.unicode===!1?(0,jt._)`${r}.length`:(0,jt._)`${(0,Zc.useFunc)(t.gen,el.default)}(${r})`;t.fail$data((0,jt._)`${o} ${i} ${s}`)}};os.default=rl;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});const nl=J,cn=X,sl={message:({schemaCode:t})=>(0,cn.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,cn._)`{pattern: ${t}}`},il={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:sl,code(t){const{data:e,$data:r,schema:s,schemaCode:n,it:i}=t,o=i.opts.unicodeRegExp?"u":"",d=r?(0,cn._)`(new RegExp(${n}, ${o}))`:(0,nl.usePattern)(t,s);t.fail$data((0,cn._)`!${d}.test(${e})`)}};cs.default=il;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});const wr=X,ol={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,wr.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,wr._)`{limit: ${t}}`},al={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:ol,code(t){const{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?wr.operators.GT:wr.operators.LT;t.fail$data((0,wr._)`Object.keys(${r}).length ${n} ${s}`)}};ls.default=al;var us={};Object.defineProperty(us,"__esModule",{value:!0});const vr=J,Er=X,cl=Z,ll={message:({params:{missingProperty:t}})=>(0,Er.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Er._)`{missingProperty: ${t}}`},ul={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ll,code(t){const{gen:e,schema:r,schemaCode:s,data:n,$data:i,it:o}=t,{opts:d}=o;if(!i&&r.length===0)return;const l=r.length>=d.loopRequired;if(o.allErrors?a():h(),d.strictRequired){const T=t.parentSchema.properties,{definedProperties:y}=t.it;for(const $ of r)if((T==null?void 0:T[$])===void 0&&!y.has($)){const g=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${$}" is not defined at "${g}" (strictRequired)`;(0,cl.checkStrictMode)(o,p,o.opts.strictRequired)}}function a(){if(l||i)t.block$data(Er.nil,f);else for(const T of r)(0,vr.checkReportMissingProp)(t,T)}function h(){const T=e.let("missing");if(l||i){const y=e.let("valid",!0);t.block$data(y,()=>w(T,y)),t.ok(y)}else e.if((0,vr.checkMissingProp)(t,r,T)),(0,vr.reportMissingProp)(t,T),e.else()}function f(){e.forOf("prop",s,T=>{t.setParams({missingProperty:T}),e.if((0,vr.noPropertyInData)(e,n,T,d.ownProperties),()=>t.error())})}function w(T,y){t.setParams({missingProperty:T}),e.forOf(T,s,()=>{e.assign(y,(0,vr.propertyInData)(e,n,T,d.ownProperties)),e.if((0,Er.not)(y),()=>{t.error(),e.break()})},Er.nil)}}};us.default=ul;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});const Sr=X,dl={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Sr.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Sr._)`{limit: ${t}}`},hl={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:dl,code(t){const{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?Sr.operators.GT:Sr.operators.LT;t.fail$data((0,Sr._)`${r}.length ${n} ${s}`)}};ds.default=hl;var hs={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});const fo=Gi;fo.code='require("ajv/dist/runtime/equal").default';Vr.default=fo;Object.defineProperty(hs,"__esModule",{value:!0});const An=Mr,ye=X,fl=Z,pl=Vr,ml={message:({params:{i:t,j:e}})=>(0,ye.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,ye._)`{i: ${t}, j: ${e}}`},vl={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ml,code(t){const{gen:e,data:r,$data:s,schema:n,parentSchema:i,schemaCode:o,it:d}=t;if(!s&&!n)return;const l=e.let("valid"),a=i.items?(0,An.getSchemaTypes)(i.items):[];t.block$data(l,h,(0,ye._)`${o} === false`),t.ok(l);function h(){const y=e.let("i",(0,ye._)`${r}.length`),$=e.let("j");t.setParams({i:y,j:$}),e.assign(l,!0),e.if((0,ye._)`${y} > 1`,()=>(f()?w:T)(y,$))}function f(){return a.length>0&&!a.some(y=>y==="object"||y==="array")}function w(y,$){const g=e.name("item"),p=(0,An.checkDataTypes)(a,g,d.opts.strictNumbers,An.DataType.Wrong),S=e.const("indices",(0,ye._)`{}`);e.for((0,ye._)`;${y}--;`,()=>{e.let(g,(0,ye._)`${r}[${y}]`),e.if(p,(0,ye._)`continue`),a.length>1&&e.if((0,ye._)`typeof ${g} == "string"`,(0,ye._)`${g} += "_"`),e.if((0,ye._)`typeof ${S}[${g}] == "number"`,()=>{e.assign($,(0,ye._)`${S}[${g}]`),t.error(),e.assign(l,!1).break()}).code((0,ye._)`${S}[${g}] = ${y}`)})}function T(y,$){const g=(0,fl.useFunc)(e,pl.default),p=e.name("outer");e.label(p).for((0,ye._)`;${y}--;`,()=>e.for((0,ye._)`${$} = ${y}; ${$}--;`,()=>e.if((0,ye._)`${g}(${r}[${y}], ${r}[${$}])`,()=>{t.error(),e.assign(l,!1).break(p)})))}}};hs.default=vl;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});const Vn=X,_l=Z,gl=Vr,yl={message:"must be equal to constant",params:({schemaCode:t})=>(0,Vn._)`{allowedValue: ${t}}`},$l={keyword:"const",$data:!0,error:yl,code(t){const{gen:e,data:r,$data:s,schemaCode:n,schema:i}=t;s||i&&typeof i=="object"?t.fail$data((0,Vn._)`!${(0,_l.useFunc)(e,gl.default)}(${r}, ${n})`):t.fail((0,Vn._)`${i} !== ${r}`)}};fs.default=$l;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});const _r=X,bl=Z,wl=Vr,El={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,_r._)`{allowedValues: ${t}}`},Sl={keyword:"enum",schemaType:"array",$data:!0,error:El,code(t){const{gen:e,data:r,$data:s,schema:n,schemaCode:i,it:o}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");const d=n.length>=o.opts.loopEnum;let l;const a=()=>l??(l=(0,bl.useFunc)(e,wl.default));let h;if(d||s)h=e.let("valid"),t.block$data(h,f);else{if(!Array.isArray(n))throw new Error("ajv implementation error");const T=e.const("vSchema",i);h=(0,_r.or)(...n.map((y,$)=>w(T,$)))}t.pass(h);function f(){e.assign(h,!1),e.forOf("v",i,T=>e.if((0,_r._)`${a()}(${r}, ${T})`,()=>e.assign(h,!0).break()))}function w(T,y){const $=n[y];return typeof $=="object"&&$!==null?(0,_r._)`${a()}(${r}, ${T}[${y}])`:(0,_r._)`${r} === ${$}`}}};ps.default=Sl;Object.defineProperty(ns,"__esModule",{value:!0});const Pl=ss,Tl=is,Nl=os,Ol=cs,Al=ls,Cl=us,Il=ds,Dl=hs,Rl=fs,kl=ps,Ml=[Pl.default,Tl.default,Nl.default,Ol.default,Al.default,Cl.default,Il.default,Dl.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Rl.default,kl.default];ns.default=Ml;var ms={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.validateAdditionalItems=void 0;const Ft=X,Un=Z,jl={message:({params:{len:t}})=>(0,Ft.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ft._)`{limit: ${t}}`},Fl={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:jl,code(t){const{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){(0,Un.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}po(t,s)}};function po(t,e){const{gen:r,schema:s,data:n,keyword:i,it:o}=t;o.items=!0;const d=r.const("len",(0,Ft._)`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass((0,Ft._)`${d} <= ${e.length}`);else if(typeof s=="object"&&!(0,Un.alwaysValidSchema)(o,s)){const a=r.var("valid",(0,Ft._)`${d} <= ${e.length}`);r.if((0,Ft.not)(a),()=>l(a)),t.ok(a)}function l(a){r.forRange("i",e.length,d,h=>{t.subschema({keyword:i,dataProp:h,dataPropType:Un.Type.Num},a),o.allErrors||r.if((0,Ft.not)(a),()=>r.break())})}}lr.validateAdditionalItems=po;lr.default=Fl;var vs={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.validateTuple=void 0;const ui=X,Zr=Z,Vl=J,Ul={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return mo(t,"additionalItems",e);r.items=!0,!(0,Zr.alwaysValidSchema)(r,e)&&t.ok((0,Vl.validateArray)(t))}};function mo(t,e,r=t.schema){const{gen:s,parentSchema:n,data:i,keyword:o,it:d}=t;h(n),d.opts.unevaluated&&r.length&&d.items!==!0&&(d.items=Zr.mergeEvaluated.items(s,r.length,d.items));const l=s.name("valid"),a=s.const("len",(0,ui._)`${i}.length`);r.forEach((f,w)=>{(0,Zr.alwaysValidSchema)(d,f)||(s.if((0,ui._)`${a} > ${w}`,()=>t.subschema({keyword:o,schemaProp:w,dataProp:w},l)),t.ok(l))});function h(f){const{opts:w,errSchemaPath:T}=d,y=r.length,$=y===f.minItems&&(y===f.maxItems||f[e]===!1);if(w.strictTuples&&!$){const g=`"${o}" is ${y}-tuple, but minItems or maxItems/${e} are not specified or different at path "${T}"`;(0,Zr.checkStrictMode)(d,g,w.strictTuples)}}}ur.validateTuple=mo;ur.default=Ul;Object.defineProperty(vs,"__esModule",{value:!0});const zl=ur,Ll={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,zl.validateTuple)(t,"items")};vs.default=Ll;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});const di=X,xl=Z,Hl=J,Bl=lr,ql={message:({params:{len:t}})=>(0,di.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,di._)`{limit: ${t}}`},Kl={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ql,code(t){const{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!(0,xl.alwaysValidSchema)(s,e)&&(n?(0,Bl.validateAdditionalItems)(t,n):t.ok((0,Hl.validateArray)(t)))}};_s.default=Kl;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});const Fe=X,qr=Z,Gl={message:({params:{min:t,max:e}})=>e===void 0?(0,Fe.str)`must contain at least ${t} valid item(s)`:(0,Fe.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Fe._)`{minContains: ${t}}`:(0,Fe._)`{minContains: ${t}, maxContains: ${e}}`},Wl={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Gl,code(t){const{gen:e,schema:r,parentSchema:s,data:n,it:i}=t;let o,d;const{minContains:l,maxContains:a}=s;i.opts.next?(o=l===void 0?1:l,d=a):o=1;const h=e.const("len",(0,Fe._)`${n}.length`);if(t.setParams({min:o,max:d}),d===void 0&&o===0){(0,qr.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&o>d){(0,qr.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,qr.alwaysValidSchema)(i,r)){let $=(0,Fe._)`${h} >= ${o}`;d!==void 0&&($=(0,Fe._)`${$} && ${h} <= ${d}`),t.pass($);return}i.items=!0;const f=e.name("valid");d===void 0&&o===1?T(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),d!==void 0&&e.if((0,Fe._)`${n}.length > 0`,w)):(e.let(f,!1),w()),t.result(f,()=>t.reset());function w(){const $=e.name("_valid"),g=e.let("count",0);T($,()=>e.if($,()=>y(g)))}function T($,g){e.forRange("i",0,h,p=>{t.subschema({keyword:"contains",dataProp:p,dataPropType:qr.Type.Num,compositeRule:!0},$),g()})}function y($){e.code((0,Fe._)`${$}++`),d===void 0?e.if((0,Fe._)`${$} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Fe._)`${$} > ${d}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Fe._)`${$} >= ${o}`,()=>e.assign(f,!0)))}}};gs.default=Wl;var vo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=X,r=Z,s=J;t.error={message:({params:{property:l,depsCount:a,deps:h}})=>{const f=a===1?"property":"properties";return(0,e.str)`must have ${f} ${h} when property ${l} is present`},params:({params:{property:l,depsCount:a,deps:h,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${a},
    deps: ${h}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[a,h]=i(l);o(l,a),d(l,h)}};function i({schema:l}){const a={},h={};for(const f in l){if(f==="__proto__")continue;const w=Array.isArray(l[f])?a:h;w[f]=l[f]}return[a,h]}function o(l,a=l.schema){const{gen:h,data:f,it:w}=l;if(Object.keys(a).length===0)return;const T=h.let("missing");for(const y in a){const $=a[y];if($.length===0)continue;const g=(0,s.propertyInData)(h,f,y,w.opts.ownProperties);l.setParams({property:y,depsCount:$.length,deps:$.join(", ")}),w.allErrors?h.if(g,()=>{for(const p of $)(0,s.checkReportMissingProp)(l,p)}):(h.if((0,e._)`${g} && (${(0,s.checkMissingProp)(l,$,T)})`),(0,s.reportMissingProp)(l,T),h.else())}}t.validatePropertyDeps=o;function d(l,a=l.schema){const{gen:h,data:f,keyword:w,it:T}=l,y=h.name("valid");for(const $ in a)(0,r.alwaysValidSchema)(T,a[$])||(h.if((0,s.propertyInData)(h,f,$,T.opts.ownProperties),()=>{const g=l.subschema({keyword:w,schemaProp:$},y);l.mergeValidEvaluated(g,y)},()=>h.var(y,!0)),l.ok(y))}t.validateSchemaDeps=d,t.default=n})(vo);var ys={};Object.defineProperty(ys,"__esModule",{value:!0});const _o=X,Jl=Z,Xl={message:"property name must be valid",params:({params:t})=>(0,_o._)`{propertyName: ${t.propertyName}}`},Yl={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Xl,code(t){const{gen:e,schema:r,data:s,it:n}=t;if((0,Jl.alwaysValidSchema)(n,r))return;const i=e.name("valid");e.forIn("key",s,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,_o.not)(i),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(i)}};ys.default=Yl;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});const Kr=J,He=X,Ql=nt,Gr=Z,Zl={message:"must NOT have additional properties",params:({params:t})=>(0,He._)`{additionalProperty: ${t.additionalProperty}}`},eu={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Zl,code(t){const{gen:e,schema:r,parentSchema:s,data:n,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:d,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Gr.alwaysValidSchema)(o,r))return;const a=(0,Kr.allSchemaProperties)(s.properties),h=(0,Kr.allSchemaProperties)(s.patternProperties);f(),t.ok((0,He._)`${i} === ${Ql.default.errors}`);function f(){e.forIn("key",n,g=>{!a.length&&!h.length?y(g):e.if(w(g),()=>y(g))})}function w(g){let p;if(a.length>8){const S=(0,Gr.schemaRefOrVal)(o,s.properties,"properties");p=(0,Kr.isOwnProperty)(e,S,g)}else a.length?p=(0,He.or)(...a.map(S=>(0,He._)`${g} === ${S}`)):p=He.nil;return h.length&&(p=(0,He.or)(p,...h.map(S=>(0,He._)`${(0,Kr.usePattern)(t,S)}.test(${g})`))),(0,He.not)(p)}function T(g){e.code((0,He._)`delete ${n}[${g}]`)}function y(g){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){T(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),d||e.break();return}if(typeof r=="object"&&!(0,Gr.alwaysValidSchema)(o,r)){const p=e.name("valid");l.removeAdditional==="failing"?($(g,p,!1),e.if((0,He.not)(p),()=>{t.reset(),T(g)})):($(g,p),d||e.if((0,He.not)(p),()=>e.break()))}}function $(g,p,S){const O={keyword:"additionalProperties",dataProp:g,dataPropType:Gr.Type.Str};S===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(O,p)}}};mn.default=eu;var $s={};Object.defineProperty($s,"__esModule",{value:!0});const tu=qe,hi=J,Cn=Z,fi=mn,ru={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:s,data:n,it:i}=t;i.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&fi.default.code(new tu.KeywordCxt(i,fi.default,"additionalProperties"));const o=(0,hi.allSchemaProperties)(r);for(const f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=Cn.mergeEvaluated.props(e,(0,Cn.toHash)(o),i.props));const d=o.filter(f=>!(0,Cn.alwaysValidSchema)(i,r[f]));if(d.length===0)return;const l=e.name("valid");for(const f of d)a(f)?h(f):(e.if((0,hi.propertyInData)(e,n,f,i.opts.ownProperties)),h(f),i.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function a(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function h(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};$s.default=ru;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});const pi=J,Wr=X,mi=Z,vi=Z,nu={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:s,parentSchema:n,it:i}=t,{opts:o}=i,d=(0,pi.allSchemaProperties)(r),l=d.filter($=>(0,mi.alwaysValidSchema)(i,r[$]));if(d.length===0||l.length===d.length&&(!i.opts.unevaluated||i.props===!0))return;const a=o.strictSchema&&!o.allowMatchingProperties&&n.properties,h=e.name("valid");i.props!==!0&&!(i.props instanceof Wr.Name)&&(i.props=(0,vi.evaluatedPropsToName)(e,i.props));const{props:f}=i;w();function w(){for(const $ of d)a&&T($),i.allErrors?y($):(e.var(h,!0),y($),e.if(h))}function T($){for(const g in a)new RegExp($).test(g)&&(0,mi.checkStrictMode)(i,`property ${g} matches pattern ${$} (use allowMatchingProperties)`)}function y($){e.forIn("key",s,g=>{e.if((0,Wr._)`${(0,pi.usePattern)(t,$)}.test(${g})`,()=>{const p=l.includes($);p||t.subschema({keyword:"patternProperties",schemaProp:$,dataProp:g,dataPropType:vi.Type.Str},h),i.opts.unevaluated&&f!==!0?e.assign((0,Wr._)`${f}[${g}]`,!0):!p&&!i.allErrors&&e.if((0,Wr.not)(h),()=>e.break())})})}}};bs.default=nu;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});const su=Z,iu={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:s}=t;if((0,su.alwaysValidSchema)(s,r)){t.fail();return}const n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};ws.default=iu;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});const ou=J,au={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ou.validateUnion,error:{message:"must match a schema in anyOf"}};Es.default=au;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});const en=X,cu=Z,lu={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,en._)`{passingSchemas: ${t.passing}}`},uu={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:lu,code(t){const{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;const i=r,o=e.let("valid",!1),d=e.let("passing",null),l=e.name("_valid");t.setParams({passing:d}),e.block(a),t.result(o,()=>t.reset(),()=>t.error(!0));function a(){i.forEach((h,f)=>{let w;(0,cu.alwaysValidSchema)(n,h)?e.var(l,!0):w=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,en._)`${l} && ${o}`).assign(o,!1).assign(d,(0,en._)`[${d}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(d,f),w&&t.mergeEvaluated(w,en.Name)})})}}};Ss.default=uu;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});const du=Z,hu={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const n=e.name("valid");r.forEach((i,o)=>{if((0,du.alwaysValidSchema)(s,i))return;const d=t.subschema({keyword:"allOf",schemaProp:o},n);t.ok(n),t.mergeEvaluated(d)})}};Ps.default=hu;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});const ln=X,go=Z,fu={message:({params:t})=>(0,ln.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,ln._)`{failingKeyword: ${t.ifClause}}`},pu={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:fu,code(t){const{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&(0,go.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const n=_i(s,"then"),i=_i(s,"else");if(!n&&!i)return;const o=e.let("valid",!0),d=e.name("_valid");if(l(),t.reset(),n&&i){const h=e.let("ifClause");t.setParams({ifClause:h}),e.if(d,a("then",h),a("else",h))}else n?e.if(d,a("then")):e.if((0,ln.not)(d),a("else"));t.pass(o,()=>t.error(!0));function l(){const h=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);t.mergeEvaluated(h)}function a(h,f){return()=>{const w=t.subschema({keyword:h},d);e.assign(o,d),t.mergeValidEvaluated(w,o),f?e.assign(f,(0,ln._)`${h}`):t.setParams({ifClause:h})}}}};function _i(t,e){const r=t.schema[e];return r!==void 0&&!(0,go.alwaysValidSchema)(t,r)}Ts.default=pu;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});const mu=Z,vu={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,mu.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Ns.default=vu;Object.defineProperty(ms,"__esModule",{value:!0});const _u=lr,gu=vs,yu=ur,$u=_s,bu=gs,wu=vo,Eu=ys,Su=mn,Pu=$s,Tu=bs,Nu=ws,Ou=Es,Au=Ss,Cu=Ps,Iu=Ts,Du=Ns;function Ru(t=!1){const e=[Nu.default,Ou.default,Au.default,Cu.default,Iu.default,Du.default,Eu.default,Su.default,wu.default,Pu.default,Tu.default];return t?e.push(gu.default,$u.default):e.push(_u.default,yu.default),e.push(bu.default),e}ms.default=Ru;var Os={},As={};Object.defineProperty(As,"__esModule",{value:!0});const he=X,ku={message:({schemaCode:t})=>(0,he.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,he._)`{format: ${t}}`},Mu={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ku,code(t,e){const{gen:r,data:s,$data:n,schema:i,schemaCode:o,it:d}=t,{opts:l,errSchemaPath:a,schemaEnv:h,self:f}=d;if(!l.validateFormats)return;n?w():T();function w(){const y=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),$=r.const("fDef",(0,he._)`${y}[${o}]`),g=r.let("fType"),p=r.let("format");r.if((0,he._)`typeof ${$} == "object" && !(${$} instanceof RegExp)`,()=>r.assign(g,(0,he._)`${$}.type || "string"`).assign(p,(0,he._)`${$}.validate`),()=>r.assign(g,(0,he._)`"string"`).assign(p,$)),t.fail$data((0,he.or)(S(),O()));function S(){return l.strictSchema===!1?he.nil:(0,he._)`${o} && !${p}`}function O(){const D=h.$async?(0,he._)`(${$}.async ? await ${p}(${s}) : ${p}(${s}))`:(0,he._)`${p}(${s})`,M=(0,he._)`(typeof ${p} == "function" ? ${D} : ${p}.test(${s}))`;return(0,he._)`${p} && ${p} !== true && ${g} === ${e} && !${M}`}}function T(){const y=f.formats[i];if(!y){S();return}if(y===!0)return;const[$,g,p]=O(y);$===e&&t.pass(D());function S(){if(l.strictSchema===!1){f.logger.warn(M());return}throw new Error(M());function M(){return`unknown format "${i}" ignored in schema at path "${a}"`}}function O(M){const E=M instanceof RegExp?(0,he.regexpCode)(M):l.code.formats?(0,he._)`${l.code.formats}${(0,he.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:M,code:E});return typeof M=="object"&&!(M instanceof RegExp)?[M.type||"string",M.validate,(0,he._)`${C}.validate`]:["string",M,C]}function D(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!h.$async)throw new Error("async format in sync schema");return(0,he._)`await ${p}(${s})`}return typeof g=="function"?(0,he._)`${p}(${s})`:(0,he._)`${p}.test(${s})`}}}};As.default=Mu;Object.defineProperty(Os,"__esModule",{value:!0});const ju=As,Fu=[ju.default];Os.default=Fu;var or={};Object.defineProperty(or,"__esModule",{value:!0});or.contentVocabulary=or.metadataVocabulary=void 0;or.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];or.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(es,"__esModule",{value:!0});const Vu=ts,Uu=ns,zu=ms,Lu=Os,gi=or,xu=[Vu.default,Uu.default,(0,zu.default)(),Lu.default,gi.metadataVocabulary,gi.contentVocabulary];es.default=xu;var Cs={},yo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(yo);Object.defineProperty(Cs,"__esModule",{value:!0});const Yt=X,zn=yo,yi=Ce,Hu=Z,Bu={message:({params:{discrError:t,tagName:e}})=>t===zn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Yt._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},qu={keyword:"discriminator",type:"object",schemaType:"object",error:Bu,code(t){const{gen:e,data:r,schema:s,parentSchema:n,it:i}=t,{oneOf:o}=n;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=s.propertyName;if(typeof d!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),a=e.const("tag",(0,Yt._)`${r}${(0,Yt.getProperty)(d)}`);e.if((0,Yt._)`typeof ${a} == "string"`,()=>h(),()=>t.error(!1,{discrError:zn.DiscrError.Tag,tag:a,tagName:d})),t.ok(l);function h(){const T=w();e.if(!1);for(const y in T)e.elseIf((0,Yt._)`${a} === ${y}`),e.assign(l,f(T[y]));e.else(),t.error(!1,{discrError:zn.DiscrError.Mapping,tag:a,tagName:d}),e.endIf()}function f(T){const y=e.name("valid"),$=t.subschema({keyword:"oneOf",schemaProp:T},y);return t.mergeEvaluated($,Yt.Name),y}function w(){var T;const y={},$=p(n);let g=!0;for(let D=0;D<o.length;D++){let M=o[D];M!=null&&M.$ref&&!(0,Hu.schemaHasRulesButRef)(M,i.self.RULES)&&(M=yi.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,M==null?void 0:M.$ref),M instanceof yi.SchemaEnv&&(M=M.schema));const E=(T=M==null?void 0:M.properties)===null||T===void 0?void 0:T[d];if(typeof E!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);g=g&&($||p(M)),S(E,D)}if(!g)throw new Error(`discriminator: "${d}" must be required`);return y;function p({required:D}){return Array.isArray(D)&&D.includes(d)}function S(D,M){if(D.const)O(D.const,M);else if(D.enum)for(const E of D.enum)O(E,M);else throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`)}function O(D,M){if(typeof D!="string"||D in y)throw new Error(`discriminator: "${d}" values must be unique strings`);y[D]=M}}}};Cs.default=qu;const Ku="http://json-schema.org/draft-07/schema#",Gu="http://json-schema.org/draft-07/schema#",Wu="Core schema meta-schema",Ju={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Xu=["object","boolean"],Yu={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Qu={$schema:Ku,$id:Gu,title:Wu,definitions:Ju,type:Xu,properties:Yu,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const r=Ui,s=es,n=Cs,i=Qu,o=["/properties"],d="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const y=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(y,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var a=qe;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return a.KeywordCxt}});var h=X;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var f=jr;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var w=Fr;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return w.default}})})(kn,kn.exports);const Zu=da(kn.exports),ed={title:"Temperament",description:"A complete description of a musical temperament with additional metadata.",type:"object",required:["name","octaveBaseName","referencePitch","referenceName","referenceOctave","notes"],properties:{name:{description:"The name of the temperament.",type:"string"},description:{description:"A description of the temperament.",type:"string"},source:{description:"The source from which the temperament data was obtained.",type:"string"},octaveBaseName:{description:"The name of the base note of the octave.",type:"string"},referencePitch:{description:"The frequency (in Hz) of the reference pitch.",type:"number",exclusiveMinimum:0},referenceName:{description:"The note name of the reference pitch.",type:"string"},referenceOctave:{description:"The octave number of the reference pitch.",type:"integer"},notes:{description:"A mapping of note names to a description of each note.",type:"object",minProperties:1,additionalProperties:{description:"A description of the note, as an offset from another note.",type:"array",minItems:2,maxItems:2,items:[{description:"The base note from which to offset.",type:"string"},{description:"The offset (in cents) from the base note.",type:"number"}]}}}},$o=new Zu,$i=$o.compile(ed),Ve=1200;function bi(t,e,r){const s=t.get(e);if(s!==void 0&&(s-r)%Ve!==0)throw new Error(`Conflicting definition for '${e}' found`);t.set(e,r)}function td(t){const e=t.notes,r=new Map([[t.referenceName,0]]),s=[[t.referenceName,0]];for(;s.length!==0;){const[o,d]=s[0];if(Object.prototype.hasOwnProperty.call(e,o)){const[l,a]=e[o],h=d-a;l!==o&&!r.has(l)&&s.push([l,h]),bi(r,l,h)}Object.keys(e).filter(l=>e[l][0]===o).forEach(l=>{const a=e[l][1],h=d+a;l!==o&&!r.has(l)&&s.push([l,h]),bi(r,l,h)}),s.shift()}Object.keys(e).forEach(o=>{if(!r.has(o))throw new Error(`Not able to determine the pitch of '${o}'`)});const n=r.get(t.octaveBaseName);if(n===void 0)throw new Error("Octave base not defined as a note");const i=n>0?n%Ve-Ve:n%Ve;return r.set(t.octaveBaseName,i),r.forEach((o,d)=>{let l=o-i;l%=Ve,l<0&&(l+=Ve),r.set(d,i+l)}),r}class yt{constructor(e){ve(this,"name");ve(this,"description");ve(this,"source");ve(this,"_octaveBaseName");ve(this,"_referenceName");ve(this,"_referenceOctave");ve(this,"_referencePitch");ve(this,"_noteNames");ve(this,"_offsets");if(!$i(e))throw new TypeError(`Incorrect temperament format: ${$o.errorsText($i.errors)}`);this.name=e.name,this.description=e.description,this.source=e.source,this._octaveBaseName=e.octaveBaseName,this._referenceName=e.referenceName,this._referenceOctave=e.referenceOctave,this._referencePitch=e.referencePitch,this._offsets=td(e),this._noteNames=[...this._offsets.entries()].sort((r,s)=>r[1]-s[1]).map(r=>r[0])}get noteNames(){return[...this._noteNames]}get octaveBaseName(){return this._octaveBaseName}get referenceName(){return this._referenceName}get referenceOctave(){return this._referenceOctave}get referencePitch(){return this._referencePitch}set referencePitch(e){if(e<=0)throw new Error("Pitch must be positive");this._referencePitch=e}getNoteNameFromPitch(e){if(e<=0)throw new Error("Pitch must be positive");const r=this.getOffset(this._octaveBaseName,this._referenceOctave);let s=Math.log2(e/this._referencePitch)*Ve;s=(s-r)%Ve+r,s<r&&(s+=Ve);let n=0,i=this._noteNames.length;for(;i-n>1;){const h=Math.trunc((i+n)/2),f=this.getOffset(this._noteNames[h],this._referenceOctave);if(s>f)n=h;else if(s<f)i=h;else return[this._noteNames[h],0]}const o=this._noteNames[n],d=s-this.getOffset(o,this._referenceOctave);let l,a;return i===this._noteNames.length?(l=this._noteNames[0],a=s-this.getOffset(l,this._referenceOctave)-Ve):(l=this._noteNames[i],a=s-this.getOffset(l,this._referenceOctave)),Math.abs(d)<Math.abs(a)?[o,d]:[l,a]}getOctaveRange(e){if(e<0)throw new Error("Radius must not be negative");const r=this._referenceOctave-e,s=this._referenceOctave+e,n=[];for(let i=r;i<=s;i++)n.push(i);return n}getOffset(e,r){const s=this._offsets.get(e);if(s===void 0)throw new Error(`Note '${e}' is not defined`);return s+(r-this._referenceOctave)*Ve}getPitch(e,r){return this._referencePitch*2**(this.getOffset(e,r)/Ve)}toJSON(){return{name:this.name,description:this.description,source:this.source,octaveBaseName:this.octaveBaseName,referencePitch:this.referencePitch,referenceName:this.referenceName,referenceOctave:this.referenceOctave,notes:Object.fromEntries([...this._offsets.entries()].map(([e,r])=>[e,[this.referenceName,r]]))}}}var Qt=window.CustomEvent;(!Qt||typeof Qt=="object")&&(Qt=function(e,r){r=r||{};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,!!r.bubbles,!!r.cancelable,r.detail||null),s},Qt.prototype=window.Event.prototype);function bo(t,e){var r="on"+e.type.toLowerCase();return typeof t[r]=="function"&&t[r](e),t.dispatchEvent(e)}function rd(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),r=function(s,n){return!(e[s]===void 0||e[s]===n)};if(e.opacity<1||r("zIndex","auto")||r("transform","none")||r("mixBlendMode","normal")||r("filter","none")||r("perspective","none")||e.isolation==="isolate"||e.position==="fixed"||e.webkitOverflowScrolling==="touch")return!0;t=t.parentElement}return!1}function Pr(t){for(;t;){if(t.localName==="dialog")return t;t.parentElement?t=t.parentElement:t.parentNode?t=t.parentNode.host:t=null}return null}function wo(t){for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;t&&t.blur&&t!==document.body&&t.blur()}function nd(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1}function In(t){return!t||!t.hasAttribute("method")?!1:t.getAttribute("method").toLowerCase()==="dialog"}function Eo(t){var e=["button","input","keygen","select","textarea"],r=e.map(function(o){return o+":not([disabled])"});r.push('[tabindex]:not([disabled]):not([tabindex=""])');var s=t.querySelector(r.join(", "));if(!s&&"attachShadow"in Element.prototype)for(var n=t.querySelectorAll("*"),i=0;i<n.length&&!(n[i].tagName&&n[i].shadowRoot&&(s=Eo(n[i].shadowRoot),s));i++);return s}function wi(t){return t.isConnected||document.body.contains(t)}function So(t){if(t.submitter)return t.submitter;var e=t.target;if(!(e instanceof HTMLFormElement))return null;var r=ee.formSubmitter;if(!r){var s=t.target,n="getRootNode"in s&&s.getRootNode()||document;r=n.activeElement}return!r||r.form!==e?null:r}function sd(t){if(!t.defaultPrevented){var e=t.target,r=ee.imagemapUseValue,s=So(t);r===null&&s&&(r=s.value);var n=Pr(e);if(n){var i=s&&s.getAttribute("formmethod")||e.getAttribute("method");i==="dialog"&&(t.preventDefault(),r!=null?n.close(r):n.close())}}}function Po(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),t.addEventListener("submit",sd,!1),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){var e=new MutationObserver(this.maybeHideModal.bind(this));e.observe(t,{attributes:!0,attributeFilter:["open"]})}else{var r=!1,s=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),n,i=function(o){if(o.target===t){var d="DOMNodeRemoved";r|=o.type.substr(0,d.length)===d,window.clearTimeout(n),n=window.setTimeout(s,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(o){t.addEventListener(o,i)})}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}Po.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&wi(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),ee.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropMouseEvent_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var r=document.createEvent("MouseEvents");r.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(r),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),t||(t=Eo(this.dialog_)),wo(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!wi(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!ee.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");rd(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,ee.needsCentering(this.dialog_)?(ee.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),t!==void 0&&(this.dialog_.returnValue=t);var e=new Qt("close",{bubbles:!1,cancelable:!1});bo(this.dialog_,e)}};var ee={};ee.reposition=function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,r=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,r)+"px"};ee.isInlinePositionSetByStylesheet=function(t){for(var e=0;e<document.styleSheets.length;++e){var r=document.styleSheets[e],s=null;try{s=r.cssRules}catch{}if(s)for(var n=0;n<s.length;++n){var i=s[n],o=null;try{o=document.querySelectorAll(i.selectorText)}catch{}if(!(!o||!nd(o,t))){var d=i.style.getPropertyValue("top"),l=i.style.getPropertyValue("bottom");if(d&&d!=="auto"||l&&l!=="auto")return!0}}}return!1};ee.needsCentering=function(t){var e=window.getComputedStyle(t);return e.position!=="absolute"||t.style.top!=="auto"&&t.style.top!==""||t.style.bottom!=="auto"&&t.style.bottom!==""?!1:!ee.isInlinePositionSetByStylesheet(t)};ee.forceRegisterDialog=function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),t.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new Po(t)};ee.registerDialog=function(t){t.showModal||ee.forceRegisterDialog(t)};ee.DialogManager=function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=1e5+150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(e){var r=[];e.forEach(function(s){for(var n=0,i;i=s.removedNodes[n];++n){if(i instanceof Element)i.localName==="dialog"&&r.push(i);else continue;r=r.concat(i.querySelectorAll("dialog"))}}),r.length&&t(r)}))};ee.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};ee.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()};ee.DialogManager.prototype.updateStacking=function(){for(var t=this.zIndexHigh_,e=0,r;r=this.pendingDialogStack[e];++e)r.updateZIndex(--t,--t),e===0&&(this.overlay.style.zIndex=--t);var s=this.pendingDialogStack[0];if(s){var n=s.dialog.parentNode||document.body;n.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};ee.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=Pr(t);){for(var e=0,r;r=this.pendingDialogStack[e];++e)if(r.dialog===t)return e===0;t=t.parentElement}return!1};ee.DialogManager.prototype.handleFocus_=function(t){var e=t.composedPath?t.composedPath()[0]:t.target;if(!this.containedByTopDialog_(e)&&document.activeElement!==document.documentElement&&(t.preventDefault(),t.stopPropagation(),wo(e),this.forwardTab_!==void 0)){var r=this.pendingDialogStack[0],s=r.dialog,n=s.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?r.focus_():e!==document.documentElement&&document.documentElement.focus()),!1}};ee.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,t.keyCode===27){t.preventDefault(),t.stopPropagation();var e=new Qt("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&bo(r.dialog,e)&&r.dialog.close()}else t.keyCode===9&&(this.forwardTab_=!t.shiftKey)};ee.DialogManager.prototype.checkDOM_=function(t){var e=this.pendingDialogStack.slice();e.forEach(function(r){t.indexOf(r.dialog)!==-1?r.downgradeModal():r.maybeHideModal()})};ee.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=e?!1:(this.pendingDialogStack.unshift(t)===1&&this.blockDocument(),this.updateStacking(),!0)};ee.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);e!==-1&&(this.pendingDialogStack.splice(e,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())};ee.dm=new ee.DialogManager;ee.formSubmitter=null;ee.imagemapUseValue=null;if(window.HTMLDialogElement===void 0){var Ei=document.createElement("form");if(Ei.setAttribute("method","dialog"),Ei.method!=="dialog"){var Jt=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(Jt){var id=Jt.get;Jt.get=function(){return In(this)?"dialog":id.call(this)};var od=Jt.set;Jt.set=function(t){return typeof t=="string"&&t.toLowerCase()==="dialog"?this.setAttribute("method",t):od.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",Jt)}}document.addEventListener("click",function(t){if(ee.formSubmitter=null,ee.imagemapUseValue=null,!t.defaultPrevented){var e=t.target;if("composedPath"in t){var r=t.composedPath();e=r.shift()||e}if(!(!e||!In(e.form))){var s=e.type==="submit"&&["button","input"].indexOf(e.localName)>-1;if(!s){if(!(e.localName==="input"&&e.type==="image"))return;ee.imagemapUseValue=t.offsetX+","+t.offsetY}var n=Pr(e);n&&(ee.formSubmitter=e)}}},!1),document.addEventListener("submit",function(t){var e=t.target,r=Pr(e);if(!r){var s=So(t),n=s&&s.getAttribute("formmethod")||e.getAttribute("method");n==="dialog"&&t.preventDefault()}});var ad=HTMLFormElement.prototype.submit,cd=function(){if(!In(this))return ad.call(this);var t=Pr(this);t&&t.close()};HTMLFormElement.prototype.submit=cd}const ld=`dialog{position:absolute;left:0;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border:solid;padding:1em;background:white;color:#000;display:block}dialog:not([open]){display:none}dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.1)}._dialog_overlay{position:fixed;top:0;right:0;bottom:0;left:0}dialog.fixed{position:fixed;top:50%;transform:translateY(-50%)}
`;var ud=Object.defineProperty,dd=Object.getOwnPropertyDescriptor,Is=(t,e,r,s)=>{for(var n=s>1?void 0:s?dd(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&ud(e,r,n),n};let Ir=class extends De{constructor(){super(...arguments),this.options=[],this._dialog=St()}firstUpdated(){this._dialog.value!==void 0&&ee.registerDialog(this._dialog.value)}render(){return _e`${dn}
      <dialog
        aria-labelledby="heading"
        @click=${this._handleDialogClick}
        ${Pt(this._dialog)}
      >
        <div id="contents">
          <div id="header">
            <h1 id="heading">${this.heading}</h1>
            <tt-button
              id="close-button"
              round
              aria-label="Close"
              @click=${()=>this.close()}
            >
              <span class="material-icons-round">close</span>
            </tt-button>
          </div>
          <div id="user-contents">
            <slot></slot>
          </div>
          <div id="options">
            ${this.options.map(t=>_e`<tt-button @click=${()=>this.close(t)}>
                  <div class="option-text">${t}</div>
                </tt-button>`)}
          </div>
        </div>
      </dialog>`}get returnValue(){var t;return((t=this._dialog.value)==null?void 0:t.returnValue)??""}set returnValue(t){this._dialog.value&&(this._dialog.value.returnValue=t)}close(t){const e=this._dialog.value;e!==void 0&&e.animate([{opacity:1},{opacity:0}],150).finished.finally(()=>{e.close(t),this.dispatchEvent(new Event("close"))})}showModal(){const t=this._dialog.value;t!==void 0&&(t.showModal(),t.animate([{opacity:0},{opacity:1}],150))}_handleDialogClick(t){t.target===this._dialog.value&&this.close()}};Ir.styles=[Nt,Ci(ld),tt`
      @keyframes fade-in {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }

      dialog {
        width: 30rem;
        height: 15rem;

        border: none;
        padding: 0;

        background: var(--color-bg);
        box-shadow: 0 0 10px var(--color-outline);
      }

      #close-button {
        margin: 0.5rem;

        width: 3rem;
        height: 3rem;
      }

      #contents {
        display: flex;
        flex-direction: column;

        width: 100%;
        height: 100%;
      }

      #header {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      #header > h1 {
        flex-grow: 1;

        margin: 0 1rem;
      }

      #options {
        display: flex;
        align-items: center;
        justify-content: space-around;

        padding: 0 1rem 1rem 1rem;
      }

      #user-contents {
        flex-grow: 1;

        padding: 0 1rem 1rem 1rem;
      }

      .option-text {
        margin: 0.5rem 1rem;

        font-size: 1.5rem;
      }
    `];Is([Se()],Ir.prototype,"heading",2);Is([Se({attribute:!1})],Ir.prototype,"options",2);Ir=Is([ft("tt-dialog")],Ir);const hd="Equal temperament",fd="Standard twelve-tone equal temperament.",pd="https://en.wikipedia.org/wiki/Equal_temperament#Twelve-tone_equal_temperament",md="A",vd=440,_d=4,gd="C",yd={C:["C",0],"C♯":["C",100],D:["C♯",100],"E♭":["D",100],E:["E♭",100],F:["E",100],"F♯":["F",100],G:["F♯",100],"G♯":["G",100],A:["G♯",100],"B♭":["A",100],B:["B♭",100]},Si={name:hd,description:fd,source:pd,referenceName:md,referencePitch:vd,referenceOctave:_d,octaveBaseName:gd,notes:yd},$d="D-based Pythagorean tuning",bd="The Pythagorean tuning system with D as the base note.",wd="https://en.wikipedia.org/wiki/Pythagorean_tuning#Method",Ed="A",Sd=440,Pd=4,Td="C",Nd={"A♭":["D",588.27],"E♭":["D",90.22],"B♭":["D",792.18],F:["D",294.13],C:["D",996.09],G:["D",498.04],D:["D",0],A:["D",701.96],E:["D",203.91],B:["D",905.87],"F♯":["D",407.82],"C♯":["D",1109.78],"G♯":["D",611.73]},Pi={name:$d,description:bd,source:wd,referenceName:Ed,referencePitch:Sd,referenceOctave:Pd,octaveBaseName:Td,notes:Nd},Od="Quarter-comma meantone",Ad="The most common meantone temperament in the sixteenth and seventeenth centuries.",Cd="https://en.wikipedia.org/wiki/Quarter-comma_meantone#12-tone_scale",Id="A",Dd=415,Rd=4,kd="C",Md={"E♭":["D",117.1],"B♭":["D",813.7],F:["D",310.3],C:["D",1006.8],G:["D",503.4],D:["D",0],A:["D",696.6],E:["D",193.2],B:["D",889.7],"F♯":["D",386.3],"C♯":["D",1082.9],"G♯":["D",579.5]},Ti={name:Od,description:Ad,source:Cd,referenceName:Id,referencePitch:Dd,referenceOctave:Rd,octaveBaseName:kd,notes:Md};var jd=Object.defineProperty,Fd=Object.getOwnPropertyDescriptor,Vd=(t,e,r,s)=>{for(var n=s>1?void 0:s?Fd(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&jd(e,r,n),n};class Jr extends Event{constructor(e){super("temperament-select"),this.temperament=e}}const gr=class extends EventTarget{constructor(){super(),this._temperaments=[new yt(Si),new yt(Pi),new yt(Ti)],this._selectedIndex=0;const t=localStorage.getItem(gr._storageKeyData);t!==null?this._temperaments=JSON.parse(t).map(r=>new yt(r)):this._temperaments=[new yt(Si),new yt(Pi),new yt(Ti)];const e=localStorage.getItem(gr._storageKeySelected);this._selectedIndex=e!==null?Number.parseInt(e,10):0,this._save()}get selectedTemperament(){return this._temperaments[this._selectedIndex]}get temperaments(){return[...this._temperaments]}set selectedTemperamentReferencePitch(t){this.selectedTemperament.referencePitch=t,this._save(),this.dispatchEvent(new Jr(this.selectedTemperament))}add(t){if(this._temperaments.findIndex(e=>e.name===t.name)!==-1)throw new Error(`A temperament named ${t.name} already exists`);this._temperaments.push(t),this._selectedIndex=this._temperaments.length-1,this._save(),this.dispatchEvent(new Jr(this.selectedTemperament))}remove(t){const e=this._temperaments.findIndex(r=>r.name===t);e!==-1&&(this._temperaments.splice(e,1),this._selectedIndex===this._temperaments.length&&this._selectedIndex--,this._save(),this.dispatchEvent(new Jr(this.selectedTemperament)))}select(t){const e=this._temperaments.findIndex(r=>r.name===t);if(e===-1)throw new Error(`No such temperament: ${t}`);this._selectedIndex=e,this._save(),this.dispatchEvent(new Jr(this.selectedTemperament))}_save(){localStorage.setItem(gr._storageKeyData,JSON.stringify(this._temperaments)),localStorage.setItem(gr._storageKeySelected,this._selectedIndex.toString())}};let Ds=gr;Ds._storageKeyData="temperaments";Ds._storageKeySelected="selectedTemperament";const oe=new Ds;let Ln=class extends De{constructor(){super(),this._referencePitchInput=St(),this._fileSelectInput=St(),this._removeConfirmation=St(),oe.addEventListener("temperament-select",t=>this._handleTemperamentUpdate(t))}render(){return _e`${dn}
      <div id="container">
        ${this._referencePitchSelector()}
        ${oe.temperaments.map(t=>this._temperamentButton(t))}
        <div class="button-group">
          <tt-button
            id="add"
            class="action"
            round
            aria-label="Add temperament"
            @click=${this._handleTemperamentAddClick}
          >
            <span class="material-icons-round" aria-hidden="true">add</span>
            <input
              id="file-select"
              type="file"
              accept=".json, application/json"
              @change=${this._handleTemperamentAddFileSelect}
              ${Pt(this._fileSelectInput)}
            />
          </tt-button>
          <tt-button
            id="remove"
            class="action"
            round
            aria-label=${`Remove ${oe.selectedTemperament.name}`}
            ?disabled=${oe.temperaments.length<=1}
            @click=${this._handleTemperamentRemoveClick}
          >
            <span class="material-icons-round" aria-hidden="true">remove</span>
          </tt-button>
        </div>
      </div>
      <tt-dialog
        heading="Confirm"
        .options=${["Yes","No"]}
        @close=${this._handleRemoveConfirmationClose}
        ${Pt(this._removeConfirmation)}
      >
        <p>
          Are you sure you want to delete
          <strong>${oe.selectedTemperament.name}</strong>?
        </p>
      </tt-dialog>`}_handleReferencePitchChange(){const t=this._referencePitchInput.value;if(t!==void 0){const e=parseInt(t.value,10);e>0&&(oe.selectedTemperamentReferencePitch=e)}}_handleRemoveConfirmationClose(){const t=this._removeConfirmation.value;t!==void 0&&t.returnValue==="Yes"&&oe.remove(oe.selectedTemperament.name)}_handleTemperamentAddClick(){var t;(t=this._fileSelectInput.value)==null||t.click()}async _handleTemperamentAddFileSelect(){var r,s;const t=(s=(r=this._fileSelectInput.value)==null?void 0:r.files)==null?void 0:s[0];if(t===void 0)return;const e=JSON.parse(await t.text());oe.add(new yt(e))}_handleTemperamentRemoveClick(){const t=this._removeConfirmation.value;t!==void 0&&(t.returnValue="",t.showModal())}_handleTemperamentSelect(t){oe.select(t.name)}_handleTemperamentUpdate(t){this._referencePitchInput.value&&(this._referencePitchInput.value.value=t.temperament.referencePitch.toString()),this.requestUpdate()}_referencePitchSelector(){return _e`<div id="reference-pitch-container">
      <span aria-label="Reference note"
        >${oe.selectedTemperament.referenceName}${oe.selectedTemperament.referenceOctave}</span
      >
      <span style="margin: 0 0.5rem" aria-hidden="true">=</span>
      <input
        id="reference-pitch-input"
        type="number"
        min="1"
        step="1"
        value=${oe.selectedTemperament.referencePitch}
        aria-label="Reference pitch in Hz"
        @change=${this._handleReferencePitchChange}
        ${Pt(this._referencePitchInput)}
      />
      <span aria-hidden="true">Hz</span>
    </div>`}_temperamentButton(t){return _e`<tt-button
      class="temperament ${Et({selected:t.name===oe.selectedTemperament.name})}"
      @click=${()=>this._handleTemperamentSelect(t)}
    >
      <span class="temperament-name">${t.name}</span>
      ${t.description?_e`<p class="temperament-description">
            ${t.description}
          </p>`:""}
    </tt-button>`}};Ln.styles=[Nt,tt`
      :host {
        display: block;
      }

      .button-group {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4rem;

        width: 100%;
      }

      .temperament {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        margin: 0.25rem 0;

        width: 100%;
      }

      .temperament-name {
        font-size: 1.1rem;
        font-weight: bold;

        transition: text-shadow 200ms;
      }

      .selected > .temperament-name {
        text-shadow: 0 0 10px var(--color-primary);
      }

      .temperament-description {
        margin: 0;

        color: var(--color-text-secondary);
        font-weight: normal;
      }

      .action {
        margin: 0.5rem;

        width: 3rem;
        height: 3rem;
      }

      .action > .material-icons-round {
        font-size: 2rem;
      }

      .action[disabled] > .material-icons-round {
        color: var(--color-text-disabled);
      }

      #container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: start;
      }

      #file-select {
        display: none;
      }

      #reference-pitch-container {
        display: flex;
        align-items: center;
        justify-content: center;

        font-size: 1.5rem;
      }

      #reference-pitch-input {
        max-width: 5ch;
        margin: 0 0.25rem;

        border: none;
        font-size: 1.5rem;
      }
    `];Ln=Vd([ft("tt-temperament-selector")],Ln);var Ud=Object.defineProperty,zd=Object.getOwnPropertyDescriptor,Ld=(t,e,r,s)=>{for(var n=s>1?void 0:s?zd(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&Ud(e,r,n),n};class xd extends Event{constructor(e){super("theme-select"),this.theme=e}}const xn=class extends EventTarget{constructor(){super();const t=localStorage.getItem(xn._storageKey);t==="system"||t==="light"||t==="dark"?this._selected=t:this._selected="system"}get selected(){return this._selected}set selected(t){this._selected=t,localStorage.setItem(xn._storageKey,t),this.dispatchEvent(new xd(this._selected))}};let To=xn;To._storageKey="theme";function No(t){const e=document.documentElement.classList;switch(t){case"system":e.remove("light","dark");break;case"light":e.remove("dark"),e.add("light");break;case"dark":e.remove("light"),e.add("dark");break}}const bt=new To;No(bt.selected);bt.addEventListener("theme-select",t=>No(t.theme));let Hn=class extends De{constructor(){super(),bt.addEventListener("theme-select",()=>this.requestUpdate())}render(){return _e`<div id="container">
      <tt-button
        class=${Et({selected:bt.selected==="system"})}
        @click=${()=>this._handleThemeSelect("system")}
      >
        ${this._themeIcon("var(--color-bg-light)","var(--color-bg-dark)")}
        <div>System</div>
      </tt-button>
      <tt-button
        class=${Et({selected:bt.selected==="light"})}
        @click=${()=>this._handleThemeSelect("light")}
      >
        ${this._themeIcon("var(--color-bg-light)")}
        <div>Light</div>
      </tt-button>
      <tt-button
        class=${Et({selected:bt.selected==="dark"})}
        @click=${()=>this._handleThemeSelect("dark")}
      >
        ${this._themeIcon("var(--color-bg-dark)")}
        <div>Dark</div>
      </tt-button>
    </div>`}_handleThemeSelect(t){bt.selected=t}_themeIcon(t,e){return e===void 0?_e`<svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 40 40"
        aria-hidden="true"
      >
        <circle
          fill=${t}
          stroke="var(--color-outline)"
          cx="20"
          cy="20"
          r="16"
        />
      </svg>`:_e`<svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 40 40"
        aria-hidden="true"
      >
        <g transform="rotate(45 20 20)">
          <path fill=${t} d="M 20 4 V 36 A 16 16 0 0 1 20 4 Z" />
          <path fill=${e} d="M 20 4 V 36 A 16 16 0 0 0 20 4 Z" />
          <circle
            fill="transparent"
            stroke="var(--color-outline)"
            cx="20"
            cy="20"
            r="16"
          />
        </g>
      </svg>`}};Hn.styles=[Nt,tt`
      :host {
        display: block;
      }

      svg {
        width: 4rem;
        height: 4rem;
      }

      tt-button {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        margin: 0 0.5rem;
      }

      tt-button.selected > svg {
        filter: drop-shadow(0 0 10px var(--color-primary));
        transition: filter 200ms;
      }

      #container {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    `];Hn=Ld([ft("tt-theme-selector")],Hn);var Hd=Object.defineProperty,Bd=Object.getOwnPropertyDescriptor,qd=(t,e,r,s)=>{for(var n=s>1?void 0:s?Bd(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&Hd(e,r,n),n};let Bn=class extends De{render(){return _e`<div id="container">
      <h1>Temperament</h1>
      <tt-temperament-selector></tt-temperament-selector>

      <h1>Theme</h1>
      <tt-theme-selector></tt-theme-selector>

      <h1>About</h1>
      <p>
        Temperatune is free software, released under the
        <a href="https://spdx.org/licenses/MIT.html">MIT license</a>. You can
        find its source code on
        <a href="https://github.com/ianprime0509/temperatune">GitHub</a>.
      </p>
    </div>`}};Bn.styles=[Nt,tt`
      :host {
        display: block;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        margin: 0.5rem 0;

        user-select: none;
      }

      svg {
        height: 4rem;
        width: auto;
      }

      #container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: start;

        width: 100%;
        height: 100%;

        background: var(--color-bg);

        overflow-y: auto;
      }
    `];Bn=qd([ft("tt-settings")],Bn);function Ie(t){if(this.size=t|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(this.size*2),r=0;r<e.length;r+=2){const l=Math.PI*r/this.size;e[r]=Math.cos(l),e[r+1]=-Math.sin(l)}this.table=e;for(var s=0,n=1;this.size>n;n<<=1)s++;this._width=s%2===0?s-1:s,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var o=0;o<this._width;o+=2){var d=this._width-o-2;this._bitrev[i]|=(i>>>o&3)<<d}}this._out=null,this._data=null,this._inv=0}var Kd=Ie;Ie.prototype.fromComplexArray=function(e,r){for(var s=r||new Array(e.length>>>1),n=0;n<e.length;n+=2)s[n>>>1]=e[n];return s};Ie.prototype.createComplexArray=function(){const e=new Array(this._csize);for(var r=0;r<e.length;r++)e[r]=0;return e};Ie.prototype.toComplexArray=function(e,r){for(var s=r||this.createComplexArray(),n=0;n<s.length;n+=2)s[n]=e[n>>>1],s[n+1]=0;return s};Ie.prototype.completeSpectrum=function(e){for(var r=this._csize,s=r>>>1,n=2;n<s;n+=2)e[r-n]=e[n],e[r-n+1]=-e[n+1]};Ie.prototype.transform=function(e,r){if(e===r)throw new Error("Input and output buffers must be different");this._out=e,this._data=r,this._inv=0,this._transform4(),this._out=null,this._data=null};Ie.prototype.realTransform=function(e,r){if(e===r)throw new Error("Input and output buffers must be different");this._out=e,this._data=r,this._inv=0,this._realTransform4(),this._out=null,this._data=null};Ie.prototype.inverseTransform=function(e,r){if(e===r)throw new Error("Input and output buffers must be different");this._out=e,this._data=r,this._inv=1,this._transform4();for(var s=0;s<e.length;s++)e[s]/=this.size;this._out=null,this._data=null};Ie.prototype._transform4=function(){var e=this._out,r=this._csize,s=this._width,n=1<<s,i=r/n<<1,o,d,l=this._bitrev;if(i===4)for(o=0,d=0;o<r;o+=i,d++){const $=l[d];this._singleTransform2(o,$,n)}else for(o=0,d=0;o<r;o+=i,d++){const $=l[d];this._singleTransform4(o,$,n)}var a=this._inv?-1:1,h=this.table;for(n>>=2;n>=2;n>>=2){i=r/n<<1;var f=i>>>2;for(o=0;o<r;o+=i)for(var w=o+f,T=o,y=0;T<w;T+=2,y+=n){const $=T,g=$+f,p=g+f,S=p+f,O=e[$],D=e[$+1],M=e[g],E=e[g+1],C=e[p],k=e[p+1],x=e[S],B=e[S+1],te=O,K=D,pe=h[y],ne=a*h[y+1],Pe=M*pe-E*ne,Te=M*ne+E*pe,Re=h[2*y],ze=a*h[2*y+1],ke=C*Re-k*ze,j=C*ze+k*Re,b=h[3*y],R=a*h[3*y+1],P=x*b-B*R,c=x*R+B*b,v=te+ke,I=K+j,F=te-ke,V=K-j,G=Pe+P,W=Te+c,re=a*(Pe-P),be=a*(Te-c),Le=v+G,it=I+W,ot=v-G,ge=I-W,at=F+be,Ke=V-re,Ge=F-be,We=V+re;e[$]=Le,e[$+1]=it,e[g]=at,e[g+1]=Ke,e[p]=ot,e[p+1]=ge,e[S]=Ge,e[S+1]=We}}};Ie.prototype._singleTransform2=function(e,r,s){const n=this._out,i=this._data,o=i[r],d=i[r+1],l=i[r+s],a=i[r+s+1],h=o+l,f=d+a,w=o-l,T=d-a;n[e]=h,n[e+1]=f,n[e+2]=w,n[e+3]=T};Ie.prototype._singleTransform4=function(e,r,s){const n=this._out,i=this._data,o=this._inv?-1:1,d=s*2,l=s*3,a=i[r],h=i[r+1],f=i[r+s],w=i[r+s+1],T=i[r+d],y=i[r+d+1],$=i[r+l],g=i[r+l+1],p=a+T,S=h+y,O=a-T,D=h-y,M=f+$,E=w+g,C=o*(f-$),k=o*(w-g),x=p+M,B=S+E,te=O+k,K=D-C,pe=p-M,ne=S-E,Pe=O-k,Te=D+C;n[e]=x,n[e+1]=B,n[e+2]=te,n[e+3]=K,n[e+4]=pe,n[e+5]=ne,n[e+6]=Pe,n[e+7]=Te};Ie.prototype._realTransform4=function(){var e=this._out,r=this._csize,s=this._width,n=1<<s,i=r/n<<1,o,d,l=this._bitrev;if(i===4)for(o=0,d=0;o<r;o+=i,d++){const Bt=l[d];this._singleRealTransform2(o,Bt>>>1,n>>>1)}else for(o=0,d=0;o<r;o+=i,d++){const Bt=l[d];this._singleRealTransform4(o,Bt>>>1,n>>>1)}var a=this._inv?-1:1,h=this.table;for(n>>=2;n>=2;n>>=2){i=r/n<<1;var f=i>>>1,w=f>>>1,T=w>>>1;for(o=0;o<r;o+=i)for(var y=0,$=0;y<=T;y+=2,$+=n){var g=o+y,p=g+w,S=p+w,O=S+w,D=e[g],M=e[g+1],E=e[p],C=e[p+1],k=e[S],x=e[S+1],B=e[O],te=e[O+1],K=D,pe=M,ne=h[$],Pe=a*h[$+1],Te=E*ne-C*Pe,Re=E*Pe+C*ne,ze=h[2*$],ke=a*h[2*$+1],j=k*ze-x*ke,b=k*ke+x*ze,R=h[3*$],P=a*h[3*$+1],c=B*R-te*P,v=B*P+te*R,I=K+j,F=pe+b,V=K-j,G=pe-b,W=Te+c,re=Re+v,be=a*(Te-c),Le=a*(Re-v),it=I+W,ot=F+re,ge=V+Le,at=G-be;if(e[g]=it,e[g+1]=ot,e[p]=ge,e[p+1]=at,y===0){var Ke=I-W,Ge=F-re;e[S]=Ke,e[S+1]=Ge;continue}if(y!==T){var We=V,Ot=-G,Me=I,we=-F,pt=-a*Le,At=-a*be,ct=-a*re,Ct=-a*W,Ht=We+pt,Oe=Ot+At,lt=Me+Ct,zr=we-ct,dr=o+w-y,mt=o+f-y;e[dr]=Ht,e[dr+1]=Oe,e[mt]=lt,e[mt+1]=zr}}}};Ie.prototype._singleRealTransform2=function(e,r,s){const n=this._out,i=this._data,o=i[r],d=i[r+s],l=o+d,a=o-d;n[e]=l,n[e+1]=0,n[e+2]=a,n[e+3]=0};Ie.prototype._singleRealTransform4=function(e,r,s){const n=this._out,i=this._data,o=this._inv?-1:1,d=s*2,l=s*3,a=i[r],h=i[r+s],f=i[r+d],w=i[r+l],T=a+f,y=a-f,$=h+w,g=o*(h-w),p=T+$,S=y,O=-g,D=T-$,M=y,E=g;n[e]=p,n[e+1]=0,n[e+2]=S,n[e+3]=O,n[e+4]=D,n[e+5]=0,n[e+6]=M,n[e+7]=E};class Tr{constructor(e,r){ve(this,"_inputLength");ve(this,"_fft");ve(this,"_bufferSupplier");ve(this,"_paddedInputBuffer");ve(this,"_transformBuffer");ve(this,"_inverseBuffer");if(e<1)throw new Error("Input length must be at least one");this._inputLength=e,this._fft=new Kd(Jd(2*e)),this._bufferSupplier=r,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(e){return new Tr(e,r=>new Float32Array(r))}static forFloat64Array(e){return new Tr(e,r=>new Float64Array(r))}static forNumberArray(e){return new Tr(e,r=>Array(r))}get inputLength(){return this._inputLength}autocorrelate(e,r=this._bufferSupplier(e.length)){if(e.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${e.length}`);for(let n=0;n<e.length;n++)this._paddedInputBuffer[n]=e[n];for(let n=e.length;n<this._paddedInputBuffer.length;n++)this._paddedInputBuffer[n]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const s=this._transformBuffer;for(let n=0;n<s.length;n+=2)s[n]=s[n]*s[n]+s[n+1]*s[n+1],s[n+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let n=0;n<e.length;n++)r[n]=this._inverseBuffer[2*n];return r}}function Gd(t){const e=[];let r=!1,s=-1/0,n=-1;for(let i=1;i<t.length-1;i++)t[i-1]<=0&&t[i]>0?(r=!0,n=i,s=t[i]):t[i-1]>0&&t[i]<=0?(r=!1,n!==-1&&e.push(n)):r&&t[i]>s&&(s=t[i],n=i);return e}function Wd(t,e){const[r,s,n]=[t-1,t,t+1],[i,o,d]=[e[r],e[s],e[n]],l=i/2-o+d/2,a=-(i/2)*(s+n)+o*(r+n)-d/2*(r+s),h=i*s*n/2-o*r*n+d*r*s/2,f=-a/(2*l),w=l*f*f+a*f+h;return[f,w]}class tr{constructor(e,r){ve(this,"_autocorrelator");ve(this,"_nsdfBuffer");ve(this,"_clarityThreshold",.9);this._autocorrelator=new Tr(e,r),this._nsdfBuffer=r(e)}static forFloat32Array(e){return new tr(e,r=>new Float32Array(r))}static forFloat64Array(e){return new tr(e,r=>new Float64Array(r))}static forNumberArray(e){return new tr(e,r=>Array(r))}get inputLength(){return this._autocorrelator.inputLength}findPitch(e,r){this._nsdf(e);const s=Gd(this._nsdfBuffer);if(s.length===0)return[0,0];const n=Math.max(...s.map(l=>this._nsdfBuffer[l])),i=s.find(l=>this._nsdfBuffer[l]>=this._clarityThreshold*n),[o,d]=Wd(i,this._nsdfBuffer);return[r/o,Math.min(d,1)]}_nsdf(e){this._autocorrelator.autocorrelate(e,this._nsdfBuffer);let r=2*this._nsdfBuffer[0],s;for(s=0;s<this._nsdfBuffer.length&&r>0;s++)this._nsdfBuffer[s]=2*this._nsdfBuffer[s]/r,r-=e[s]**2+e[e.length-s-1]**2;for(;s<this._nsdfBuffer.length;s++)this._nsdfBuffer[s]=0}}function Jd(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}class Xd extends Event{constructor(e,r){super("pitch-update"),this.pitch=e,this.clarity=r}}class Yd extends EventTarget{constructor(e){super(),this._audioContext=e,this._microphoneSource=null,this._interval=null,this._analyserNode=e.createAnalyser(),this._buffer=new Float32Array(this._analyserNode.fftSize),this._pitchDetector=tr.forFloat32Array(this._buffer.length)}async listen(){this._microphoneSource||(this._microphoneSource=await this._obtainMicrophoneSource()),this._microphoneSource.connect(this._analyserNode),this._audioContext.resume(),this._interval&&clearInterval(this._interval),this._interval=setInterval(()=>{this._analyserNode.getFloatTimeDomainData(this._buffer);const[e,r]=this._pitchDetector.findPitch(this._buffer,this._audioContext.sampleRate);this.dispatchEvent(new Xd(e,r))},150)}stop(){this._interval&&(clearInterval(this._interval),this._interval=null),this._microphoneSource&&(this._microphoneSource.disconnect(this._analyserNode),this._microphoneSource.mediaStream.getTracks().forEach(e=>e.stop()),this._microphoneSource=null,this._analyserNode=this._audioContext.createAnalyser(),this._buffer=new Float32Array(this._analyserNode.fftSize),this._pitchDetector=tr.forFloat32Array(this._buffer.length))}async _obtainMicrophoneSource(){const e=await navigator.mediaDevices.getUserMedia({audio:!0});return this._audioContext.createMediaStreamSource(e)}}class Qd{constructor(e){this._audioContext=e,this._oscillator=null,this._pitch=440}set pitch(e){var r,s;this._pitch=e,(s=(r=this._oscillator)==null?void 0:r.frequency)==null||s.setValueAtTime(e,this._audioContext.currentTime)}play(){this._oscillator||(this._oscillator=this._audioContext.createOscillator(),this.pitch=this._pitch,this._oscillator.start()),this._oscillator.connect(this._audioContext.destination),this._audioContext.resume()}pause(){this._oscillator&&(this._audioContext.suspend(),this._oscillator.disconnect(this._audioContext.destination))}}var Zd=Object.defineProperty,eh=Object.getOwnPropertyDescriptor,vn=(t,e,r,s)=>{for(var n=s>1?void 0:s?eh(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&Zd(e,r,n),n};const th=5;let ar=class extends De{constructor(){super(...arguments),this.unavailable=!1}render(){const t=Math.round(this.centOffset),e=Math.abs(t);let r;return this.unavailable?r="Input unavailable":e<th?r="In tune":r=`${e} ${e===1?"cent":"cents"} ${t>0?"sharp":"flat"}`,_e`<div id="container">
      <div id="feedback" aria-label="Feedback">${r}</div>
      ${this.unavailable?"":_e`<div id="pitch" aria-label="Pitch">
            ${this.pitch.toFixed(0)} Hz
          </div>`}
    </div>`}};ar.styles=[Nt,tt`
      :host {
        display: block;
      }

      #container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        width: 100%;
        height: 100%;
      }

      #feedback {
        font-size: 3rem;
        text-align: center;

        user-select: none;
      }

      #pitch {
        color: var(--color-text-secondary);
        font-size: 1.5rem;
        text-align: center;

        user-select: none;
      }
    `];vn([Se({type:Number})],ar.prototype,"centOffset",2);vn([Se({type:Number})],ar.prototype,"pitch",2);vn([Se({type:Boolean})],ar.prototype,"unavailable",2);ar=vn([ft("tt-feedback")],ar);class rh{constructor({maxInteractionDelay:e=250,maxMeasurements:r=3,minVelocity:s=1e-4}={}){this._lastTX=null,this._measurements=[],this._currentFling=null,this._maxInteractionDelay=e,this._maxMeasurements=r,this._minVelocity=s}cancelFling(){this._currentFling=null}fling(e){const r=new Promise(s=>{if(this._measurements.length===0||this._lastTX===null){s();return}const n=performance.now();if(n-this._lastTX[0]>this._maxInteractionDelay){this._measurements=[],this._lastTX=null,s();return}let i=this._measurements.reduce((l,a)=>l+a)/this._measurements.length;this._measurements=[],this._lastTX=null;let o=n;const d=l=>{if(this._currentFling!==r)return;const a=l-o;o=l,i-=i/a,Math.abs(i)<this._minVelocity&&(i=0),e(i*a),i===0?s():requestAnimationFrame(d)};requestAnimationFrame(d)});return this._currentFling=r,r}recordPosition(e){const r=performance.now();if(this._lastTX!==null&&r>this._lastTX[0]){const[s,n]=this._lastTX;r-s<=this._maxInteractionDelay?(this._measurements.push((e-n)/(r-s)),this._measurements.length>this._maxMeasurements&&this._measurements.splice(0,1)):this._measurements=[]}this._lastTX=[r,e]}}var nh=Object.defineProperty,sh=Object.getOwnPropertyDescriptor,st=(t,e,r,s)=>{for(var n=s>1?void 0:s?sh(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&nh(e,r,n),n};function ih(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class oh extends Event{constructor(e){super("item-select",{bubbles:!0,composed:!0}),this.item=e}}let Ue=class extends De{constructor(){super(),this.disabled=!1,this.itemWidth=300,this.itemHeight=150,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.__pos=0,this._width=0,this._height=0,this._canvas=St(),this._textBuffers=[],this._flingManager=new rh,this._lastX=null,this._currentScroll=null,this._resizeObserver=new ResizeObserver(t=>{this._handleResize(t)}),this._resizeObserver.observe(this),bt.addEventListener("theme-select",()=>{this._updateTextBuffers(),this._render()})}render(){return _e`<canvas
      width=${this._width}
      height=${this._height}
      @pointerdown=${this._handlePointerDown}
      @pointermove=${this._handlePointerMove}
      @pointerout=${this._handlePointerOut}
      @pointerup=${this._handlePointerUp}
      ${Pt(this._canvas)}
      >${this._item(this.selected)}</canvas
    >`}shouldUpdate(t){return t.size===0||t.size===1&&t.has("_note")?(this._render(),!1):!0}updated(t){(t.has("items")||t.has("itemWidth")||t.has("itemHeight")||t.has("_height"))&&this._updateTextBuffers(),this._render()}get selected(){return Math.round(this._pos)}cancelScroll(){this._currentScroll=null}scrollToItem(t,{duration:e=250,delay:r=0}={}){const s=o=>o<.5?2*o*o:1-Math.pow(-2*o+2,2)/2,n=this._pos,i=new Promise(o=>{const d=performance.now(),l=a=>{if(this._currentScroll!==i){o();return}const h=Math.max(a-d-r,0),f=e>0?s(Math.min(h/e,1)):1;this._pos=n+(t-n)*f,h>=e?o():requestAnimationFrame(l)};requestAnimationFrame(l)});return this._currentScroll=i,i}get _pos(){return this.__pos}set _pos(t){const e=this._pos;this.__pos=Math.max(this.min,Math.min(t,this.max)),this.requestUpdate("_pos",e)}_item(t){return this.items[(t%this.items.length+this.items.length)%this.items.length]}_render(){const t=this._canvas.value;if(t===void 0)return;const e=t.getContext("2d");if(e===null)return;const r=t.width,s=t.height;if(r===0||s===0)return;e.clearRect(0,0,r,s);const n=Math.round(this._pos),i=this._pos-n,o=r/2-this.itemWidth*i,d=Math.max(-Math.floor((o+this.itemWidth)/this.itemWidth),this.min-n),l=Math.min(Math.floor((r-o+this.itemWidth)/this.itemWidth),this.max-n);for(let a=d;a<=l;a++){const h=((a+n)%this.items.length+this.items.length)%this.items.length,f=this._textBuffers[a===0?h+this.items.length:h],w=o+a*this.itemWidth,T=Math.exp(-(w-r/2)*(w-r/2)/(r*r/4)),y=T*this.itemWidth,$=T*this._height,g=w-y/2,p=(this._height-$)/2;e.globalAlpha=T,e.drawImage(f,g,p,y,$)}}_updateTextBuffers(){const t=getComputedStyle(this),e=Math.max(window.devicePixelRatio,2),r=20,s=(n,i,o)=>{const d=n.width=e*this.itemWidth,l=n.height=e*this._height,a=n.getContext("2d");if(a!==null)return a.clearRect(0,0,d,l),a.fillStyle=t.getPropertyValue("--color-text"),a.font=`${e*this.itemHeight}px Roboto, sans-serif`,a.textBaseline="middle",a.textAlign="center",o&&(a.shadowOffsetX=a.shadowOffsetY=0,a.shadowBlur=e*r,a.shadowColor=t.getPropertyValue("--color-primary")),a.fillText(String(i),d/2,l/2,d-2*e*r),n};this._textBuffers.splice(this.items.length*2);for(let n=this._textBuffers.length;n<this.items.length*2;n++)this._textBuffers.push(document.createElement("canvas"));this.items.forEach((n,i)=>{s(this._textBuffers[i],n,!1),s(this._textBuffers[i+this.items.length],n,!0)})}_handlePointerDown(t){!this.disabled&&t.button===0&&(this._flingManager.cancelFling(),this.cancelScroll())}_handlePointerMove(t){!this.disabled&&t.buttons&1&&(this._lastX!==null&&(this._pos-=(t.clientX-this._lastX)/this.itemWidth,this._flingManager.recordPosition(this._pos)),this._lastX=t.clientX)}_handlePointerOut(t){!this.disabled&&t.buttons&1&&(this._snapItem().then(()=>this._onItemSelect(this.selected)),this._lastX=null)}_handlePointerUp(t){!this.disabled&&t.button===0&&(this._flingManager.fling(e=>this._pos+=e).then(()=>this._snapItem()).then(()=>this._onItemSelect(this.selected)),this._lastX=null)}_handleResize(t){const e=t.find(r=>r.target===this);e&&(this._width=e.contentRect.width,this._height=e.contentRect.height)}_onItemSelect(t){this.dispatchEvent(new oh(t))}_snapItem(){return this.scrollToItem(this.selected)}};Ue.styles=tt`
    :host {
      display: block;
    }

    canvas {
      touch-action: pan-y pinch-zoom;
    }
  `;st([Se({attribute:!1,hasChanged:(t,e)=>t!==e&&!ih(t??[],e??[])})],Ue.prototype,"items",2);st([Se({type:Boolean})],Ue.prototype,"disabled",2);st([Se({type:Number})],Ue.prototype,"itemWidth",2);st([Se({type:Number})],Ue.prototype,"itemHeight",2);st([Se({type:Number})],Ue.prototype,"min",2);st([Se({type:Number})],Ue.prototype,"max",2);st([rt()],Ue.prototype,"_width",2);st([rt()],Ue.prototype,"_height",2);st([rt()],Ue.prototype,"_pos",1);Ue=st([ft("tt-item-carousel")],Ue);var ah=Object.defineProperty,ch=Object.getOwnPropertyDescriptor,Ur=(t,e,r,s)=>{for(var n=s>1?void 0:s?ch(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&ah(e,r,n),n};const Dn=2,Ni=new AudioContext;let xt=class extends De{constructor(){super(),this._microphoneAvailable=!0,this._playing=!1,this._pitch=oe.selectedTemperament.referencePitch,this._centOffset=0,this._notes=St(),this._octaves=St(),this._pitchAnalyser=new Yd(Ni),this._pitchGenerator=new Qd(Ni),oe.addEventListener("temperament-select",()=>{this._resetPitch(),this.requestUpdate()}),this._pitchAnalyser.addEventListener("pitch-update",t=>this._handlePitchUpdate(t))}render(){return _e`${dn}
      <main>
        <tt-item-carousel
          id="notes"
          class=${Et({unavailable:!this._playing&&!this._microphoneAvailable})}
          aria-hidden=${!this._microphoneAvailable}
          aria-label="Note"
          ?disabled=${!this._playing}
          .items=${oe.selectedTemperament.noteNames}
          @item-select=${this._handleNoteItemSelect}
          ${Pt(this._notes)}
        ></tt-item-carousel>

        ${this._playing?_e`<tt-item-carousel
              id="octaves"
              aria-label="Octave"
              itemHeight="50"
              min="0"
              max="4"
              .items=${oe.selectedTemperament.getOctaveRange(Dn)}
              @item-select=${this._handleOctaveItemSelect}
              ${Pt(this._octaves)}
            ></tt-item-carousel>`:_e`<tt-feedback
              id="feedback"
              centOffset=${this._centOffset}
              pitch=${this._pitch}
              ?unavailable=${!this._microphoneAvailable}
            ></tt-feedback>`}

        <tt-button
          id="play-button"
          pulse
          round
          aria-label=${this._playing?"Listen for pitch":"Play pitch"}
          @click=${()=>this._playing=!this._playing}
        >
          <span class="material-icons-round" aria-hidden="true"
            >${this._playing?"mic":"play_arrow"}</span
          >
        </tt-button>
      </main>`}updated(t){t.has("_playing")&&(this._resetPitch(),this._playing?(this._pitchAnalyser.stop(),this._pitchGenerator.play()):(this._pitchGenerator.pause(),this._pitchAnalyser.listen().catch(()=>this._microphoneAvailable=!1)))}_handleNoteItemSelect(t){const e=this._octaves.value;e!==void 0&&this._updateGeneratedPitch(t.item,e.selected)}_handleOctaveItemSelect(t){const e=this._notes.value;e!==void 0&&this._updateGeneratedPitch(e.selected,t.item)}_handlePitchUpdate(t){var i;if(t.clarity<.9)return;this._pitch=t.pitch;const[e,r]=oe.selectedTemperament.getNoteNameFromPitch(t.pitch),s=oe.selectedTemperament.noteNames.indexOf(e),n=r/200;(i=this._notes.value)==null||i.scrollToItem(s+n,{duration:100}),this._centOffset=r}_resetPitch(){var r,s;const t=oe.selectedTemperament.noteNames.indexOf(oe.selectedTemperament.referenceName),e=Dn;(r=this._notes.value)==null||r.scrollToItem(t),(s=this._octaves.value)==null||s.scrollToItem(e,{duration:0}),this._updateGeneratedPitch(t,e)}_updateGeneratedPitch(t,e){const r=oe.selectedTemperament.noteNames,s=(t%r.length+r.length)%r.length,n=e-Dn+oe.selectedTemperament.referenceOctave,i=oe.selectedTemperament.getPitch(r[s],n);this._pitchGenerator.pitch=this._pitch=i}};xt.styles=[Nt,tt`
      :host {
        display: block;
      }

      main {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        width: 100%;
        height: 100%;
      }

      tt-item-carousel {
        transition: opacity 250ms;
      }

      .unavailable {
        opacity: 0;
      }

      #notes {
        width: 100%;
        height: 100%;
        max-height: 40%;
      }

      #octaves {
        width: 100%;
        height: 100%;
        max-height: 20%;
      }

      #feedback {
        height: 20%;
        max-height: 20%;
      }

      #play-button > .material-icons-round {
        font-size: 8rem;
      }
    `];Ur([rt()],xt.prototype,"_microphoneAvailable",2);Ur([rt()],xt.prototype,"_playing",2);Ur([rt()],xt.prototype,"_pitch",2);Ur([rt()],xt.prototype,"_centOffset",2);xt=Ur([ft("tt-tuner")],xt);var lh=Object.defineProperty,uh=Object.getOwnPropertyDescriptor,_n=(t,e,r,s)=>{for(var n=s>1?void 0:s?uh(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(n=(s?o(e,r,n):o(n))||n);return s&&n&&lh(e,r,n),n};let cr=class extends De{constructor(){super(),this._settingsOpen=!1,this._settingsHidden=!0,this._tunerHidden=!1,navigator.wakeLock&&navigator.wakeLock.request("screen")}render(){return _e`${dn}
      <div id="container">
        <tt-button
          id="menu-button"
          round
          aria-label=${this._settingsOpen?"Close settings":"Open settings"}
          @click=${this._toggleSettingsOpen}
        >
          <span class="material-icons-round" aria-hidden="true"
            >${this._settingsOpen?"arrow_back":"menu"}</span
          >
        </tt-button>
        <tt-settings
          class=${Et({hidden:this._settingsHidden,open:this._settingsOpen})}
          @transitionend=${this._handleSettingsTransitionEnd}
        ></tt-settings>
        <tt-tuner class=${Et({hidden:this._tunerHidden})}></tt-tuner>
      </div>`}_handleSettingsTransitionEnd(){this._settingsHidden=!this._settingsOpen,this._tunerHidden=this._settingsOpen}_toggleSettingsOpen(){this._settingsOpen=!this._settingsOpen,this._settingsHidden=this._tunerHidden=!1}};cr.styles=[Nt,tt`
      :host {
        display: block;
      }

      #container {
        display: flex;

        width: 100vw;
        height: 100vh;
      }

      #menu-button {
        position: absolute;

        margin: 0.5rem;

        width: 3rem;
        height: 3rem;

        z-index: 2;
      }

      .hidden {
        /*
         * Using display: none prevents the first drawer opening animation from
         * playing, since it does not have a position on the page before the
         * animation starts (it just pops open immediately with no animation)
         */
        visibility: hidden;
      }

      tt-settings {
        position: absolute;

        width: 100vw;
        height: 100vh;

        z-index: 1;

        transform: translateX(-100vw);
        transition: transform 300ms;
      }

      tt-settings.open {
        transform: translateX(0);

        box-shadow: 0 0 10px gray;
      }

      tt-tuner {
        position: absolute;

        width: 100vw;
        height: 100vh;
      }
    `];_n([rt()],cr.prototype,"_settingsOpen",2);_n([rt()],cr.prototype,"_settingsHidden",2);_n([rt()],cr.prototype,"_tunerHidden",2);cr=_n([ft("tt-app")],cr);const dh="modulepreload",hh=function(t){return"/temperatune/"+t},Oi={},fh=function(e,r,s){if(!r||r.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=hh(i),i in Oi)return;Oi[i]=!0;const o=i.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(!!s)for(let h=n.length-1;h>=0;h--){const f=n[h];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${d}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":dh,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((h,f)=>{a.addEventListener("load",h),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function ph(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:n,onRegisteredSW:i,onRegisterError:o}=t;let d,l;const a=async(f=!0)=>{await l};async function h(){if("serviceWorker"in navigator){const{Workbox:f}=await fh(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);d=new f("/temperatune/sw.js",{scope:"/temperatune/",type:"classic"}),d.addEventListener("activated",w=>{!w.isUpdate&&w.isExternal||w.isUpdate?window.location.reload():s==null||s()}),d.register({immediate:e}).then(w=>{i?i("/temperatune/sw.js",w):n==null||n(w)}).catch(w=>{o==null||o(w)})}}return l=h(),a}ph();
